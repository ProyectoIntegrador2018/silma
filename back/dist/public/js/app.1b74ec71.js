(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0198":function(e,t,r){"use strict";var a=r("db9c"),n=r.n(a);n.a},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"03d5":function(e,t,r){},"050e":function(e,t,r){},"07e4":function(e,t,r){},"0970":function(e,t,r){},"0f9b":function(e,t,r){"use strict";var a=r("ec7d"),n=r.n(a);n.a},1624:function(e,t,r){},"17f8":function(e,t,r){"use strict";var a=r("c3c1"),n=r.n(a);n.a},"2a2f":function(e,t,r){"use strict";var a=r("be40"),n=r.n(a);n.a},"327b":function(e,t,r){"use strict";var a=r("34c4"),n=r.n(a);n.a},3464:function(e,t,r){"use strict";var a=r("4109"),n=r.n(a);n.a},"34c4":function(e,t,r){},"3d51":function(e,t,r){},4109:function(e,t,r){},4607:function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="4678"},"4c3d":function(e,t,r){},"52a4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t),r.d(t,"events",(function(){return rs}));r("ac1f"),r("5319"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[e.globalLoading?r("v-progress-linear",{staticClass:"global-loading",attrs:{indeterminate:""}}):e._e(),e.userId?r("v-toolbar",{attrs:{color:"blue darken-3",dark:"","max-height":"65"}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.navigate()}}},[r("v-icon",[e._v(e._s("/"===e.$router.currentRoute.path?"mdi-home":"mdi-arrow-left"))])],1),"writer"==e.role?r("v-toolbar-items",{staticClass:"hidden-xs"},[r("v-btn",{attrs:{text:""},on:{click:function(t){return e.goTo("/inventario/"+e.userId)}}},[e._v("Inventario ")])],1):e._e(),r("v-spacer"),r("v-toolbar-title",{staticStyle:{"margin-right":"16px"}},[r("span",{staticClass:"hidden-sm-and-down"},[e._v(e._s(this.name))])]),r("typeOfUserSelection"),r("v-btn",{staticStyle:{"margin-left":"16px",height:"48px"},attrs:{outlined:"",small:"",text:""},on:{click:function(t){return e.logOut()}}},[e._v("Cerrar Sesión")])],1):e._e(),r("div",{staticClass:"main-container"},[r("router-view")],1),r("v-snackbar",{model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[e._v(" "+e._s(e.snackbarMessage)+" "),r("v-btn",{attrs:{color:"pink",text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v(" Cerrar ")])],1),r("DialogComponent",{ref:"warningDialog"})],1)},s=[],i=(r("b0c0"),r("96cf"),r("1da1")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-select",{staticClass:"my-0",staticStyle:{width:"200px"},attrs:{"hide-details":"",items:e.shownRoles,value:e.currentRole,"item-value":"type","item-text":"title",light:"",solo:""},on:{change:e.changeRole},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("v-divider",{staticClass:"mb-2"}),e._l(e.shownNoRoles,(function(t){return r("v-list-item",{key:t.title,on:{click:function(r){return e.goToRegister(t.link)}}},[r("v-icon",[e._v("mdi-plus")]),e._v(" "+e._s(t.titleRegister)+" ")],1)}))]},proxy:!0}])})],1)},c=[],l=(r("4de4"),r("7db0"),r("caad"),r("2532"),r("99af"),r("5530")),u=r("bc3a"),d=r.n(u),m="https://silma.herokuapp.com/api",p=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,a=c.length>2&&void 0!==c[2]&&c[2],e.prev=2,n=a?{"Content-Type":"multipart/form-data"}:{},s=r?{Authorization:"Bearer ".concat(r)}:{},e.next=7,d.a.get("".concat(m,"/").concat(t),{headers:Object(l["a"])({},n,{},s)});case 7:return i=e.sent,e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e["catch"](2),console.error(e.t0.response.data),o=e.t0.response.data.message||"Algo salió mal.",rs.$emit("snackbar",o);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,u,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:void 0,n=p.length>3&&void 0!==p[3]&&p[3],s=p.length>4?p[4]:void 0,e.prev=3,i=n?{"Content-Type":"multipart/form-data"}:{},o=a?{Authorization:"Bearer ".concat(a)}:{},e.next=8,d.a.post("".concat(m,"/").concat(t),r,{params:s,headers:Object(l["a"])({},i,{},o)});case 8:return c=e.sent,e.abrupt("return",c.data);case 12:e.prev=12,e.t0=e["catch"](3),console.error(e.t0.response.data),u=e.t0.response.data.message||"Algo salió mal.",rs.$emit("snackbar",u);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,u,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:void 0,n=p.length>3&&void 0!==p[3]&&p[3],s=p.length>4?p[4]:void 0,e.prev=3,i=n?{"Content-Type":"multipart/form-data"}:{},o=a?{Authorization:"Bearer ".concat(a)}:{},e.next=8,d.a.patch("".concat(m,"/").concat(t),r,{params:s,headers:Object(l["a"])({},i,{},o)});case 8:return c=e.sent,e.abrupt("return",c.data);case 12:e.prev=12,e.t0=e["catch"](3),console.error(e.t0.response.data),u=e.t0.response.data.message||"Algo salió mal.",rs.$emit("snackbar",u);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,a=u.length>2?u[2]:void 0,n=u.length>3&&void 0!==u[3]&&u[3],e.prev=3,s=n?{"Content-Type":"multipart/form-data"}:{},i=r?{Authorization:"Bearer ".concat(r)}:{},e.next=8,d.a.delete("".concat(m,"/").concat(t),{headers:Object(l["a"])({},s,{},i)},a);case 8:return o=e.sent,e.abrupt("return",o.data);case 12:e.prev=12,e.t0=e["catch"](3),console.error(e.t0.response.data),c=e.t0.response.data.message||"Algo salió mal.",rs.$emit("snackbar",c);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),h={data:function(){return{items:[{title:"Escritor",type:"writer",titleRegister:"Registrate como Escritor",link:"/Registro_Escritor"},{title:"Lector",type:"reader",titleRegister:"Registrate como Lector",link:"/Registro_Lector"},{title:"Administrador",type:"admin"}],roles:[],currentRole:void 0}},created:function(){var e=this.$cookies.get("user_type");this.currentRole=this.items.find((function(t){return t.type===e})),this.updateRoles()},computed:{shownRoles:function(){var e=this;return this.items.filter((function(t){return e.roles.includes(t.type)}))},shownNoRoles:function(){var e=this;return this.items.filter((function(t){return!e.roles.includes(t.type)&&"admin"!==t.type}))}},methods:{updateRoles:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("user_id"),a=e.$cookies.get("token"),t.next=4,p("users/".concat(r),a);case 4:n=t.sent,e.roles=n.roles;case 6:case"end":return t.stop()}}),t)})))()},changeRole:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$cookies.set("user_type",e),t.currentRole=t.items.find((function(t){return t.type===e})),t.$router.go();case 3:case"end":return r.stop()}}),r)})))()},goToRegister:function(e){this.$router.push(e)}}},b=h,x=r("2877"),w=Object(x["a"])(b,o,c,!1,null,null,null),k=w.exports,_=function(e){if(!e.token)return!1;if(a["default"].$cookies.set("token",e.token),!a["default"].$cookies.isKey("user_type")){var t=e.roles.includes("admin")?"admin":e.roles.includes("writer")?"writer":"reader";a["default"].$cookies.set("user_type",t),a["default"].$cookies.set("user_id",e._id),a["default"].$cookies.set("user_name",e.name)}return e.admin&&a["default"].$cookies.set("role",e.admin.role),!0},R=function(){a["default"].$cookies.remove("token"),a["default"].$cookies.remove("user_type"),a["default"].$cookies.remove("user_id"),a["default"].$cookies.remove("user_name")},y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{style:{zIndex:e.styleOptions.zIndex},attrs:{"max-width":e.styleOptions.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-toolbar",{attrs:{dark:"",color:e.styleOptions.color,dense:"",flat:""}},[r("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.title))])],1),r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4"},[e._v(e._s(e.message))]),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("v-btn",{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("Si")]),r("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Cancelar")])],1)],1)],1)},S=[],j={data:function(){return{dialog:!1,onAccept:null,onReject:null,message:null,title:null,styleOptions:{color:"primary",width:290,zIndex:200}}},methods:{open:function(e){var t=e.title,r=e.message,a=e.styleOptions,n=e.onAccept,s=e.onReject;this.dialog=!0,this.title=t,this.message=r,this.styleOptions=Object.assign(this.styleOptions,a),this.onAccept=n,this.onReject=s},agree:function(){"function"===typeof this.onAccept&&this.onAccept(),this.dialog=!1,this.onAccept=null},cancel:function(){"function"===typeof this.onReject&&this.onReject(),this.dialog=!1,this.onReject=null}}},C=j,O=Object(x["a"])(C,y,S,!1,null,null,null),E=O.exports,D={components:{typeOfUserSelection:k,DialogComponent:E},data:function(){return{userId:void 0,role:void 0,name:void 0,showSnackbar:!1,snackbarMessage:"",globalLoading:!1}},created:function(){this.updateCookies()},watch:{$route:function(e,t){this.updateCookies()}},methods:{navigate:function(){"/"===this.$router.currentRoute.path?this.$router.go():this.$router.go(-1)},updateCookies:function(){this.userId=this.$cookies.get("user_id"),this.role=this.$cookies.get("user_type"),this.name=this.$cookies.get("user_name")},logOut:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:R(),e.$router.go();case 2:case"end":return t.stop()}}),t)})))()},snackbar:function(e){this.snackbarMessage=e,this.showSnackbar=!0},goTo:function(e){this.$router.push(e)}},mounted:function(){var e=this;rs.$on("snackbar",(function(t){e.snackbar(t)})),rs.$on("dialog",(function(t){e.$refs.warningDialog.open(t)})),rs.$on("globalLoading",(function(t){e.globalLoading=t}))}},$=D,P=(r("034f"),Object(x["a"])($,n,s,!1,null,null,null)),T=P.exports,A=(r("d81d"),r("45fc"),r("8c4f")),M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Registro de Lector Beta ")]),r("br"),r("v-form",{ref:"form"},[r("h2",{staticClass:"primary--text"},[e._v("Datos personales")]),e.logedIn?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{outlined:"",label:"Nombre completo",rules:[e.requiredRule,e.letterRule]},model:{value:e.reader.name,callback:function(t){e.$set(e.reader,"name",t)},expression:"reader.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.emailRule],label:"E-mail"},model:{value:e.reader.email,callback:function(t){e.$set(e.reader,"email",t)},expression:"reader.email"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{outlined:"",label:"Contraseña",rules:[e.requiredRule,e.passwordMinRule],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",name:"input-10-1"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.reader.password,callback:function(t){e.$set(e.reader,"password",t)},expression:"reader.password"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("TimestampDateField",{attrs:{label:"Fecha de Nacimiento",icon:"event",rules:[e.requiredRule]},model:{value:e.reader.birthdate,callback:function(t){e.$set(e.reader,"birthdate",t)},expression:"reader.birthdate"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Teléfono celular",rules:[e.requiredRule,e.numericRule,e.phoneRule]},model:{value:e.reader.phone,callback:function(t){e.$set(e.reader,"phone",t)},expression:"reader.phone"}})],1),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-select",{attrs:{outlined:"",label:"Nacionalidad",items:e.countries,dense:"",rules:[e.requiredRule]},model:{value:e.reader.nationality,callback:function(t){e.$set(e.reader,"nationality",t)},expression:"reader.nationality"}})],1)],1):e._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Link a perfil de facebook",rules:[e.requiredRule,e.facebookRule]},model:{value:e.reader.facebookLink,callback:function(t){e.$set(e.reader,"facebookLink",t)},expression:"reader.facebookLink"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v("Datos para Silma")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-select",{attrs:{outlined:"",label:"¿Quién te recomendo Silma?",items:e.administrators,dense:"",rules:[e.requiredRule]},model:{value:e.reader.recommended,callback:function(t){e.$set(e.reader,"recommended",t)},expression:"reader.recommended"}})],1),r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-radio-group",{attrs:{rules:[e.requiredRule],label:"¿Cuánto te tardas en leer 200 páginas?",row:""},model:{value:e.reader.readingProficiency,callback:function(t){e.$set(e.reader,"readingProficiency",t)},expression:"reader.readingProficiency"}},[r("v-radio",{attrs:{label:"3 días o menos",value:"3 or less",color:"success"}}),r("v-radio",{attrs:{label:"5 días",value:"4 to 6",color:"success"}}),r("v-radio",{attrs:{label:"7 días o más",value:"7 or more",color:"success"}})],1)],1)],1),r("h2",{staticClass:"primary--text"},[e._v("¿Entre que fechas puedes leer textos?")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("TimestampDateField",{attrs:{label:"Desde",icon:"event",rules:[e.requiredRule]},model:{value:e.reader.readFrom,callback:function(t){e.$set(e.reader,"readFrom",t)},expression:"reader.readFrom"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("TimestampDateField",{attrs:{label:"Hasta",icon:"event",rules:[e.requiredRule]},model:{value:e.reader.readTill,callback:function(t){e.$set(e.reader,"readTill",t)},expression:"reader.readTill"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"12"}},[r("h2",{staticClass:"primary--text"},[e._v("Preferencias de textos")])]),e._l(e.genres,(function(t){return r("v-col",{key:t.name,attrs:{cols:"12",sm:"3"}},[r("v-switch",{attrs:{label:t.name,color:"success",value:t.name},model:{value:e.preferencesNames,callback:function(t){e.preferencesNames=t},expression:"preferencesNames"}})],1)}))],2)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Lector Registrado!")]),r("v-card-text",[e._v("Serás reenviado a tu dashboard")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:"",href:"/"},on:{click:function(t){e.dialogSuccess=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.errorMessage.title))]),r("v-card-text",[e._v(e._s(e.errorMessage.message))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{width:"70%"},model:{value:e.termsAndConditionsDialog,callback:function(t){e.termsAndConditionsDialog=t},expression:"termsAndConditionsDialog"}},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v("Términos y Condiciones")]),r("v-card-text",{domProps:{innerHTML:e._s(e.termsAndConditionsContent)}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"gray"},on:{click:function(t){e.termsAndConditionsDialog=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-col",{attrs:{cols:"12"}},[r("div",{on:{click:function(e){e.stopPropagation()}}},[r("v-icon",[e._v("mdi-checkbox-marked-circle")]),e._v(" Al registrarte, aceptas los "),r("a",{attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.termsAndConditionsDialog=!0}}},[e._v(" términos y condiciones")])],1)])],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{align:"end"}},[r("v-btn",{attrs:{color:"success"},on:{click:e.create}},[e._v("Registrarse")])],1)],1)],1)},I=[],q=r("b85c"),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{value:e.computedDateFormattedMomentjs,clearable:"",readonly:"",label:e.label,rules:e.rules,icon:e.icon,outlined:""},on:{"click:clear":function(t){e.date=null},input:e.updateDate}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{"header-color":"green lighten-1",color:"green lighten-1"},on:{change:function(t){e.menu=!1},input:e.updateDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)},F=[],N=r("c1df"),W=r.n(N),B={data:function(){return{date:"",menu:!1}},props:["label","rules","icon"],computed:{computedDateFormattedMomentjs:function(){return this.date?W()(this.date).format("dddd, MMMM Do YYYY"):""}},methods:{updateDate:function(e){var t=new Date(e);this.$emit("input",t)}}},z=B,G=Object(x["a"])(z,L,F,!1,null,null,null),U=G.exports,V=["Yolanda Chapa","Aurora Carranza","Anagaby Saban","Lorena Martinez","Nadie / Otra persona"],H=["10-12","13-15","16-18","18+"],Y=["Mexico","Afghanistan","Albania","Algeria","Andorra","Angola","Antarctica","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic","Congo, Republic of the","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Greenland","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, North","Korea, South","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Micronesia","Moldova","Mongolia","Morocco","Monaco","Mozambique","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Samoa","San Marino"," Sao Tome","Saudi Arabia","Senegal","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],K={title:"Error en el registro",message:"Por favor inténtelo nuevamente más tarde."},Z={title:"Al menos 3 preferencias",message:"Por favor seleccione al menos 3 géneros de lectura de su preferencia."},J={title:"Número incorrecto de géneros marcados",message:"Por favor, seleccione de 1 a 3 géneros correspondientes a su texto."},Q={title:"Tamaño de la descripción no válido",message:"Por favor, ingrese una descripción que tenga entre 20 y 200 carácteres."},X={title:"Número de capítulos incorrecto",message:"El número de capítulos ingresado no corresponde al número de capítulos con los que el archivo cuenta."},ee={title:"Número de capítulos igual a cero",message:"El número de capítulos tiene que ser mayor a cero."},te={title:"Número de capítulos máximos alcanzados",message:"Usted ya cuenta con todos los capítulos del libro"},re={title:"Capítulos extra agregados",message:"Se han agregado más capítulos exitosamente"},ae="\nSilma se preocupa por la protección de los datos de los lectores editoriales, es por eso que te\ncompartimos nuestras políticas de protección de datos. Te informamos que:\n<ol>\n  <li>Tus datos personales son para nuestro uso interno.</li>\n  <li>Silma se reserva la facultad de cambiar la política de uso de datos con el objetivo de adaptarla a\n  novedades legislativas, prácticas del sector o intereses especiales. En cualquier caso, se te\n  serán anunciados los cambios para contar con tu aprobación.</li>\n  <li>Trata de mantener tus datos en Silma actualizados para que podamos servirte de una mejor\n  manera.</li>\n  <li>No usamos cookies. </li>\n  <li>Tus datos son tuyos para verificarlos, rectificarlos y cancelarlos. En caso de desear la\n  cancelación, comunícate con la editorial.</li>\n</ol>\n",ne="Silma se preocupa por la protección de los datos de los escritores, es por eso que te compartimos\nnuestras políticas de protección de datos. Te informamos que:\n<ol>\n<li>Tus datos personales son para nuestro uso interno. </li>\n<li>Tu texto está protegido por tu Registro de Derechos de Autor. Por eso es importante que lo\nanotes al registrarte para dictamen. </li>\n<li>Silma se reserva la facultad de cambiar la política de uso de datos con el objetivo de adaptarla a\nnovedades legislativas, prácticas del sector o intereses especiales. En cualquier caso, te serán\nanunciados los cambios para contar con tu aprobación. </li>\n<li>Trata de mantener tus datos en Silma actualizados para que podamos servirte de una mejor\nmanera. </li>\n<li>No usamos cookies. </li>\n<li>Tus datos son tuyos para verificarlos, rectificarlos y cancelarlos. En caso de desear la\ncancelación, comunícate con la editorial. </li>\n</ol>\n",se=[{value:1,label:"Enviar Texto",description:"El autor envía su texto para lectura editorial."},{value:2,label:"Lectura Editorial",description:"Se asigna el texto a tres lectores editoriales. Si la mayoría aprueba el texto, este es admitido."},{value:3,label:"Entrevista con el autor",description:"Agentes de la editorial se entrevistan con el autor a platicar de participación, ventas y otros detalles."},{value:4,label:"Contrato",description:"El autor recibe el contrato."},{value:5,label:"Tallereo",description:"Se lee y revisa el libro completo por agentes de la editorial y el editor."},{value:6,label:"Correcciones",description:"El autor realiza las correcciones pertinentes al texto."},{value:7,label:"Portada",description:"Se trabaja sobre la portada del libro"},{value:8,label:"Maquetado",description:"Se trabaja en los interiores del libro."},{value:9,label:"Impresion",description:"Se manda a imprimir un primer tiraje."}],ie=["Enviar Texto","Lectura Editorial","Entrevista con el autor","Tallereo","Correcciones","Portada","Maquetado"],oe=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"],ce=(r("466d"),function(e){return!!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"E-mail inválido"}),le=function(e){return void 0!==e&&null!==e&&""!==e||"Campo obligatorio"},ue=function(e){return/^\d+$/.test(e)||"Solo se aceptan números"},de=function(e){return/^((https:\/\/www\.)|(www\.))?(facebook\.com\/){1}(.)+/.test(e)||"Perfil de facebook inválido"},me=function(e){return void 0!==e&&!!e.match(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/)||"Link invalido, ocupa tener http o https"},pe=function(e){return/.{8,}/.test(e)||"Mínimo 8 caracteres"},ve=function(e){return/\d{10}/.test(e)||"Ingresa los 10 dígitos de tu celular"},fe=function(e){return/^[A-Za-záéíóúÁÉÍÓÚ\s]+$/.test(e)||"Solo se aceptan letras"},ge={components:{TimestampDateField:U},data:function(){return{logedIn:"",reader:{name:"",email:"",phone:"",password:"",facebookLink:"",birthdate:"",preferences:[],recommended:"",readingProficiency:"",nationality:"",readFrom:"",readTill:""},errorMessage:{title:"",message:""},preferencesNames:[],dialogSuccess:!1,dialogError:!1,genres:[],countries:Y,administrators:V,emailRule:ce,requiredRule:le,numericRule:ue,facebookRule:de,passwordMinRule:pe,phoneRule:ve,letterRule:fe,errorServerRegister:K,errorPreferencesMinimun:Z,showPassword:!1,termsAndConditionsDialog:!1,termsAndConditionsContent:ae}},asyncComputed:{getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p("user/genres");case 2:return e.genres=t.sent,t.abrupt("return",e.genres);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){null===this.$cookies.get("token")?this.logedIn=!0:this.logedIn=!1},methods:{preferenceId:function(e){var t,r=Object(q["a"])(this.genres);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(e==a.name)return a._id}}catch(n){r.e(n)}finally{r.f()}},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,!(e.preferencesNames.length<3)){t.next=7;break}return e.errorMessage=e.errorPreferencesMinimun,e.dialogError=!0,t.abrupt("return");case 7:r=Object(q["a"])(e.preferencesNames);try{for(r.s();!(a=r.n()).done;)n=a.value,e.reader.preferences.push(e.preferenceId(n))}catch(c){r.e(c)}finally{r.f()}if(s={email:"",password:""},!1!==e.logedIn){t.next=19;break}return e.reader.userid=e.$cookies.get("user_id"),t.next=14,v("register/addReader",e.reader,e.$cookies.get("token"));case 14:t.sent,i={token:e.$cookies.get("token"),user_type:"reader",user_id:e.$cookies.get("user_id"),user_name:e.$cookies.get("user_name")},_(i),t.next=27;break;case 19:return t.next=21,v("register/readers",e.reader);case 21:return s.email=e.reader.email,s.password=e.reader.password,t.next=25,v("user/authentication",s);case 25:o=t.sent,_(o);case 27:e.dialogSuccess=!0,t.next=34;break;case 30:t.prev=30,t.t0=t["catch"](2),e.errorMessage=e.errorServerRegister,e.dialogError=!0;case 34:case"end":return t.stop()}}),t,null,[[2,30]])})))()}}},he=ge,be=Object(x["a"])(he,M,I,!1,null,"594b72e6",null),xe=be.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Registro de Escritor ")]),r("br"),r("v-form",{ref:"form"},[r("h2",{staticClass:"primary--text"},[e._v("Datos personales")]),e.logedIn?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Nombre completo",rules:[e.requiredRule]},model:{value:e.writer.name,callback:function(t){e.$set(e.writer,"name",t)},expression:"writer.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.emailRule],label:"E-mail"},model:{value:e.writer.email,callback:function(t){e.$set(e.writer,"email",t)},expression:"writer.email"}})],1)],1):e._e(),r("v-layout",{attrs:{row:"",wrap:""}},[e.logedIn?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Contraseña",rules:[e.requiredRule,e.passwordMinRule],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",name:"input-10-1"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.writer.password,callback:function(t){e.$set(e.writer,"password",t)},expression:"writer.password"}})],1):e._e(),e.logedIn?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Teléfono celular",rules:[e.requiredRule,e.numericRule,e.phoneRule]},model:{value:e.writer.phone,callback:function(t){e.$set(e.writer,"phone",t)},expression:"writer.phone"}})],1):e._e()],1),r("v-layout",{attrs:{row:"",wrap:""}},[e.logedIn?r("v-col",{attrs:{cols:"12",sm:"6"}},[r("TimestampDateField",{attrs:{label:"Fecha de Nacimiento",icon:"event",rules:[e.requiredRule]},model:{value:e.writer.birthdate,callback:function(t){e.$set(e.writer,"birthdate",t)},expression:"writer.birthdate"}})],1):e._e(),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Seudónimo",rules:[e.requiredRule]},model:{value:e.writer.pseudonym,callback:function(t){e.$set(e.writer,"pseudonym",t)},expression:"writer.pseudonym"}})],1)],1),e.logedIn?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-select",{attrs:{outlined:"",label:"Nacionalidad",items:e.countries,dense:"",rules:[e.requiredRule]},model:{value:e.writer.nationality,callback:function(t){e.$set(e.writer,"nationality",t)},expression:"writer.nationality"}})],1)],1):e._e()],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Escritor Registrado!")]),r("v-card-text",[e._v("Serás reenviado a tu dashboard")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:"",href:"/"},on:{click:function(t){e.dialogSuccess=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Error en el registro")]),r("v-card-text",[e._v("Por favor inténtelo más tarde")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{width:"70%"},model:{value:e.termsAndConditionsDialog,callback:function(t){e.termsAndConditionsDialog=t},expression:"termsAndConditionsDialog"}},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v("Términos y Condiciones")]),r("v-card-text",{domProps:{innerHTML:e._s(e.termsAndConditionsContent)}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"gray"},on:{click:function(t){e.termsAndConditionsDialog=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-col",{attrs:{cols:"12"}},[r("div",{on:{click:function(e){e.stopPropagation()}}},[r("v-icon",[e._v("mdi-checkbox-marked-circle")]),e._v(" Al registrarte, aceptas los "),r("a",{attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.termsAndConditionsDialog=!0}}},[e._v(" términos y condiciones")])],1)])],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{align:"end"}},[r("v-btn",{attrs:{color:"success"},on:{click:e.create}},[e._v("Registrarse")])],1)],1)],1)},ke=[],_e={components:{TimestampDateField:U},data:function(){return{logedIn:"",writer:{name:"",email:"",phone:"",password:"",birthdate:"",pseudonym:"",nationality:"",phase:1,isPlus:!1},dialogSuccess:!1,dialogError:!1,emailRule:ce,requiredRule:le,numericRule:ue,passwordMinRule:pe,phoneRule:ve,countries:Y,showPassword:!1,termsAndConditionsDialog:!1,termsAndConditionsContent:ne}},created:function(){null===this.$cookies.get("token")?this.logedIn=!0:this.logedIn=!1},methods:{create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(r={email:e.writer.email,password:e.writer.password},t.prev=3,!1!==e.logedIn){t.next=13;break}return e.writer.userid=e.$cookies.get("user_id"),t.next=8,v("register/addWriter",e.writer,e.$cookies.get("token"));case 8:t.sent,a={token:e.$cookies.get("token"),user_type:"writer",user_id:e.$cookies.get("user_id"),user_name:e.$cookies.get("user_name")},_(a),t.next=21;break;case 13:return t.next=15,v("register/writers",e.writer);case 15:return r.email=e.writer.email,r.password=e.writer.password,t.next=19,v("user/authentication",r);case 19:n=t.sent,_(n);case 21:e.dialogSuccess=!0,t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](3),e.dialogError=!0;case 27:case"end":return t.stop()}}),t,null,[[3,24]])})))()}}},Re=_e,ye=Object(x["a"])(Re,we,ke,!1,null,"b92c62f4",null),Se=ye.exports,je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Iniciar Sesión ")]),r("br"),r("br"),r("div",{attrs:{align:"center"}},[r("v-form",{ref:"form"},[r("v-text-field",{staticStyle:{width:"50%"},attrs:{outlined:"",rules:[e.emailRule],label:"E-mail"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("v-text-field",{staticStyle:{width:"50%"},attrs:{outlined:"",label:"Contraseña",rules:[],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",name:"input-10-1"},on:{"click:append":function(t){e.showPassword=!e.showPassword},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),r("br"),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("¡Bienvenido a tu sesión!")]),r("v-card-text",[e._v("Serás reenviado a tu dashboard")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogSuccess=!1}}},[e._v("Entrar")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Error al iniciar sesión")]),r("v-card-text",[e._v("Por favor, inténtelo más tarde")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Entendido")])],1)],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogIncorrectInfo,callback:function(t){e.dialogIncorrectInfo=t},expression:"dialogIncorrectInfo"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Datos Incorrectos")]),r("v-card-text",[e._v("La información ingresada no es correcta")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogIncorrectInfo=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-btn",{staticClass:"btn btn-indigo",on:{click:e.login}},[e._v("Login")]),r("br"),r("br"),r("p",[e._v("¿No tienes cuenta?")]),r("a",{staticClass:"button",attrs:{href:"/Registro_Lector"}},[e._v("Registrarme como Lector")]),r("br"),r("a",{staticClass:"button",attrs:{href:"/Registro_Escritor"}},[e._v("Registrarme como Escritor")])],1)],1)])},Ce=[],Oe={data:function(){return{user:{email:"",password:""},showPassword:!1,emailRule:ce,dialogSuccess:!1,dialogError:!1,dialogIncorrectInfo:!1}},methods:{login:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={email:e.user.email,password:e.user.password},t.next=4,v("user/authentication",r);case 4:a=t.sent,n=_(a),n?e.$router.push("/"):e.dialogIncorrectInfo=!0,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.dialogError=!0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Ee=Oe,De=Object(x["a"])(Ee,je,Ce,!1,null,null,null),$e=De.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[r("v-content",[r("div",{attrs:{align:"center"}},[r("br"),r("br"),r("h1",[e._v("¡Bienvenido a Silma!")]),"writer"==this.role?r("writerDashboard"):e._e(),"reader"==this.role?r("readerDashboard"):e._e(),"admin"==this.role?r("adminDashbaord"):e._e()],1)])],1)},Te=[],Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ma-4"},[e.suggestionExists?r("v-container",[e.status?r("h2",[e._v("Tus Sugerencias")]):r("h2",[e._v("Tu Lectura")]),r("br"),r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344"}},[r("v-card-title",[e._v(" "+e._s(e.text.title)+" ")]),r("v-card-subtitle",[e._v(" "+e._s(e.text.description)+" ")]),e.status?r("v-card-actions",[r("v-btn",{attrs:{color:"green",text:""},on:{click:function(t){return e.accept()}}},[e._v("Aceptar")]),r("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return e.reject()}}},[e._v("Rechazar")])],1):r("v-card-actions",[r("v-btn",{attrs:{color:"purple",text:"",href:"/Mis_Lecturas/"+this.suggestion._id}},[e._v("Continuar lectura")])],1)],1),r("br")],1):r("v-container",[r("h2",[e._v("No tienes lecturas ni sugerencias por el momento")])]),r("div",{staticClass:"my-2",attrs:{align:"right"}},[r("div",{staticClass:"btns-wrapper"},[r("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),a),[r("v-icon",{attrs:{left:""}},[e._v("mdi-account-cog")]),e._v(" MIS REPORTES ")],1)]}}])},[r("v-list",[e._l(e.readerTask,(function(t,a){return[r("v-list-item",{key:a,attrs:{href:""+t.route}},[r("v-list-item-title",[e._v(e._s(t.title))])],1)]}))],2)],1)],1)]),r("h2",[e._v("Tus Historial de lecturas")]),r("br"),r("Table",{attrs:{headers:e.headers,items:e.data}}),r("DialogComponent",{ref:"confirm"})],1)},Me=[],Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.formattedHeaders,items:e.items,options:e.pagination,"item-key":"_id"},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return e._l(t.items,(function(t){return r("tr",{key:t._id},[e._l(e.displayedHeaders,(function(a){return r("td",{key:a.value},["Fase"==a.text?r("div",[e.admin&&e.isDashboard?r("div",[r("v-select",{staticStyle:{width:"100%"},attrs:{items:e.faseOptions,"item-text":"label","item-value":"value"},on:{change:function(r){return e.onChange(t)}},model:{value:t.phase,callback:function(r){e.$set(t,"phase",r)},expression:"item.phase"}})],1):e._e(),!e.admin&&e.isDashboard?r("div",{on:{click:function(r){return e.seeTextDetails(t)}}},[r("v-select",{staticStyle:{"max-width":"35%"},attrs:{items:e.faseOptions,"item-text":"label","item-value":"value",readonly:""},model:{value:t.phase,callback:function(r){e.$set(t,"phase",r)},expression:"item.phase"}})],1):e._e(),e.admin||e.isDashboard?e._e():r("div",[e._t(a.value,[e._v(e._s(t[a.value])+" ")],{value:t[a.value],props:t})],2)]):e._e(),"Fase"!=a.text?r("div",{staticClass:"text-truncate",style:{width:a.width}},[e._t(a.value,[e._v(e._s(t[a.value])+" ")],{value:t[a.value],props:t})],2):e._e()])})),r("td",{staticClass:"text-xs-center"},[e._t("actions",null,{props:t})],2)],2)}))}}],null,!0)}),e.withPagination?r("div",{staticClass:"text-xs-center pt-2"},[r("v-options",{attrs:{length:e.pages,circle:""},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1):e._e()],1)},qe=[],Le=r("2909"),Fe={props:{headers:{type:Array},items:{type:Array},withPagination:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},admin:{type:Boolean,default:!1},isDashboard:{type:Boolean,default:!0}},data:function(){return{faseOptions:se,pagination:{rowsPerPage:300,totalItems:20}}},computed:{pages:function(){return null===this.pagination.rowsPerPage||null===this.totalItems?0:Math.ceil(this.totalItems/this.pagination.rowsPerPage)},totalItems:function(){return this.items.length},displayedHeaders:function(){return this.headers.filter((function(e){return!e.actions}))},formattedHeaders:function(){var e=this.expand?[{text:"",value:"expand",sortable:!1,align:"left",width:"10px"}]:[];return[].concat(e,Object(Le["a"])(this.headers))}},methods:{onChange:function(e){this.$emit("changePhase",e._id,e.phase)},seeTextDetails:function(e){this.$emit("textDetails",e)}}},Ne=Fe,We=Object(x["a"])(Ne,Ie,qe,!1,null,null,null),Be=We.exports,ze=(r("1276"),r("e7d1")),Ge=r.n(ze),Ue=function(e){for(var t=function(e){return/^ {0,3}# [\s\S]*$/.test(e)||!1},r=0,a=[],n="",s=e.split("\n"),i=0;i<s.length;i++){var o=s[i];t(o)&&(r+=1,r>1&&(a.push(n),n="\n")),n=n.concat(o,"\n")}return a.push(n),a},Ve=function(e){var t=new Ge.a.Parser,r=new Ge.a.HtmlRenderer,a=t.parse(e);return r.render(a)},He=function(e){return"Completed"==e?"Completado":"Rejected"==e?"Rechazado":"Pendiente"},Ye={components:{Table:Be,DialogComponent:E},data:function(){return{headers:[{text:"Título",align:"start",value:"title"},{text:"Fecha en que se recibio sugerencia:",value:"sentDate"},{text:"Estado",value:"suggestionStatus"}],data:[],history:"",reader:this.$cookies.get("user_id"),role:this.$cookies.get("user_type"),suggestion:{},text:{},suggestionExists:!1,status:!0,errorMessage:"",errorServerRegister:K,token:"",readerTask:[{title:"Mis lecturas",route:"/readBooks"}]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getInfo();case 2:return t.next=4,e.getHistory();case 4:case"end":return t.stop()}}),t)})))()},methods:{accept:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r={title:"Aceptar",message:"¿Seguro que quieres comprometerte a leer el texto?",styleOptions:{color:"primary"},onAccept:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v("/suggestions/"+e.suggestion._id+"/accept",{},e.token);case 2:return t.next=4,e.getInfo();case 4:return t.next=6,e.getHistory();case 6:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}(),onReject:function(){}},rs.$emit("dialog",r);case 2:case"end":return t.stop()}}),t)})))()},reject:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r={title:"Rechazar",message:"¿Seguro que quieres rechazar la sugerencia?",styleOptions:{color:"primary"},onAccept:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v("/suggestions/"+e.suggestion._id+"/reject",{},e.token);case 2:return e.suggestionExists=!1,t.next=5,e.getInfo();case 5:return t.next=7,e.getHistory();case 7:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}(),onReject:function(){}},rs.$emit("dialog",r);case 2:case"end":return t.stop()}}),t)})))()},getInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.token=e.$cookies.get("token"),t.next=3,p("/suggestions/getSuggestionDashboard/"+e.reader,e.token);case 3:if(e.suggestion=t.sent,0==e.suggestion){t.next=10;break}return e.suggestionExists=!0,t.next=8,p("/texts/"+e.suggestion.text,e.token);case 8:e.text=t.sent,"Accepted"==e.suggestion.suggestionStatus&&(e.status=!1);case 10:case"end":return t.stop()}}),t)})))()},composeHistory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],r=0;case 2:if(!(r<e.history.length)){t.next=10;break}return t.next=5,p("/texts/"+e.history[r].text._id,e.token);case 5:a=t.sent,n.push({title:a.title,sentDate:W()(new Date(e.history[r].sentDate)).format("DD/MM/YYYY"),suggestionStatus:He(e.history[r].suggestionStatus)});case 7:r++,t.next=2;break;case 10:e.data=n;case 11:case"end":return t.stop()}}),t)})))()},getHistory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.token=e.$cookies.get("token"),t.next=3,p("/suggestions/getAllSuggestionsDashboard/"+e.reader,e.token);case 3:return e.history=t.sent,t.next=6,e.composeHistory();case 6:case"end":return t.stop()}}),t)})))()}}},Ke=Ye,Ze=Object(x["a"])(Ke,Ae,Me,!1,null,null,null),Je=Ze.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ma-4"},[r("h2",[e._v("Tus escritos")]),r("v-alert",{attrs:{border:"top","colored-border":"",type:"info",elevation:"2","max-width":"50%"}},[e._v(" Recuerda que para agregar un escrito, es necesario hacerlo con el formato de Common Mark y los capítulos tendrán que estar marcados como encabezados (Heading 1). "),r("br"),r("a",{attrs:{href:"https://commonmark.org/help/",target:"_blank"}},[e._v("Presiona aquí para más información")])]),r("br"),r("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.addText()}}},[e._v("Agregar Escrito")]),r("div",{staticClass:"my-2",attrs:{align:"right"}},[r("div",{staticClass:"btns-wrapper"},[r("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),a),[r("v-icon",{attrs:{left:""}},[e._v("mdi-account-cog")]),e._v(" MIS REPORTES ")],1)]}}])},[r("v-list",[e._l(e.writerTask,(function(t,a){return[r("v-list-item",{key:a,attrs:{href:""+t.route}},[r("v-list-item-title",[e._v(e._s(t.title))])],1)]}))],2)],1)],1)]),r("Table",{attrs:{headers:e.headers,items:e.data},on:{textDetails:e.seeTextDetails},scopedSlots:e._u([{key:"phase",fn:function(t){var a=t.props;return[r("v-chip",{staticClass:"ma-2",attrs:{label:"",outlined:"",small:"",color:a.isRejected?"red":"primary"}},[e._v(" "+e._s(a.isRejected?"Rechazado":a.phase)+" ")])]}}])}),r("v-dialog",{attrs:{persistent:"","max-width":"60%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" Fases cumplidas ")]),r("v-card-text",[r("Table",{attrs:{headers:e.headersDialog,items:e.dataDialog,isDashboard:!1}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Cerrar ")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"60%"},model:{value:e.newTextDialog,callback:function(t){e.newTextDialog=t},expression:"newTextDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" Agregar Texto ")]),r("div",{staticStyle:{"text-align":"center"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.newText()}}},[e._v("Escrito Nuevo ")])],1),r("v-card-text",[r("Table",{attrs:{headers:e.headersTextsDialog,items:e.rejectedTexts,isDashboard:!1},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("v-row",[r("div",{staticStyle:{margin:"2.5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",color:"primary"},on:{click:function(t){return e.editRejectedText(a)}}},"v-btn",s,!1),n),[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-file-document-edit")])],1)]}}],null,!0)},[r("span",[e._v("Cargar datos")])])],1)])]}}])})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.newTextDialog=!1}}},[e._v(" Cerrar ")])],1)],1)],1)],1)},Xe=[];function et(e,t){var r=e.response?e.response.data:e;return r.message||t}function tt(e){var t=this.$cookies.get("user_type"),r=this.$cookies.get("role");return"admin"!==t||r&&r[e]}var rt={components:{Table:Be},props:["tripId","ticketId"],data:function(){return{headers:[{text:"Título",align:"start",sortable:!0,value:"title"},{text:"Número de páginas",value:"numberOfPages"},{text:"Fase",value:"phase",color:"red"}],data:[],writer:this.$cookies.get("user_id"),role:this.$cookies.get("user_type"),phaseDetails:se,dialog:!1,headersDialog:[{text:"Fase",align:"start",sortable:!0,value:"label"},{text:"Descripción",value:"description"}],headersTextsDialog:[{text:"Titulo",align:"start",value:"title"},{text:"Descripción",value:"description"},{text:"Número de Páginas",value:"numberOfPages",sortable:!0},{text:"Número de Capítulos",value:"numberOfChapters",sortable:!0},{text:"Acciones",actions:!0,sortable:!1}],dataDialog:null,newTextDialog:!1,rejectedTexts:[],writerTask:[{title:"Mis Libros",route:"/myBooks"},{title:"Mis Ventas",route:"/mySales"}]}},asyncComputed:{getTexts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("texts/writer/".concat(e.writer),r);case 3:e.data=t.sent,e.rejectedTexts=e.data.filter((function(e){return e.isRejected}));case 5:case"end":return t.stop()}}),t)})))()}},methods:{seeTextDetails:function(e){this.dataDialog=this.phaseDetails.filter((function(t){return t.value<=e.phase})),this.dialog=!0},addText:function(){this.newTextDialog=!0},newText:function(){this.$router.push("/Agregar_Escrito")},editRejectedText:function(e){var t=e._id;this.$router.push("/Agregar_Escrito/"+t)}}},at=rt,nt=Object(x["a"])(at,Qe,Xe,!1,null,null,null),st=nt.exports,it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"my-2",attrs:{align:"right"}},[r("div",{staticClass:"btns-wrapper"},[r("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),a),[r("v-icon",{attrs:{left:""}},[e._v("mdi-account-cog")]),e._v(" Administrar ")],1)]}}])},[r("v-list",[e._l(e.adminTask,(function(t,a){return[t.hasPermission?r("v-list-item",{key:a,attrs:{href:""+t.route}},[r("v-list-item-title",[e._v(e._s(t.title))])],1):e._e()]}))],2)],1)],1)]),r("h1",{attrs:{align:"left"}},[e._v("Textos Recibidos")]),r("Table",{attrs:{headers:e.headers,items:e.dataTexts,admin:!0},on:{changePhase:e.advancePhase},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("v-row",[r("div",{staticStyle:{margin:"2.5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",color:"primary"},on:{click:function(t){return e.seeSuggestions(a)}}},"v-btn",s,!1),n),[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-file-document-edit")])],1)]}}],null,!0)},[r("span",[e._v("Sugerencias")])])],1),r("div",{staticStyle:{margin:"2.5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",color:"error",disabled:a.isRejected},on:{click:function(t){return e.openRejectDialog(a)}}},"v-btn",s,!1),n),[r("v-icon",[e._v("mdi-file-cancel")])],1)]}}],null,!0)},[r("span",[e._v("Rechazar texto")])])],1)])]}},{key:"phase",fn:function(t){var a=t.props;return[r("v-chip",{staticClass:"ma-2",attrs:{label:"",outlined:"",small:"",color:a.isRejected?"red":"primary"}},[e._v(" "+e._s(a.isRejected?"Rechazado":a.phase)+" ")])]}}])}),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"450"},model:{value:e.dialogReject,callback:function(t){e.dialogReject=t},expression:"dialogReject"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Rechazo del texto")]),r("v-card-text",[e._v(" Favor de adjuntar un PDF explicando porque el texto del autor fue rechazado. Se le mandará un correo al autor con esta explicación. ")]),r("v-card-text",[r("v-file-input",{attrs:{accept:".pdf",label:"Subir PDF",outlined:"",rules:[e.requiredRule]},model:{value:e.rejectDocument,callback:function(t){e.rejectDocument=t},expression:"rejectDocument"}})],1),r("v-card-actions",[r("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){return e.closeRejectDialog()}}},[e._v(" Cancelar ")]),r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){return e.rejectText()}}},[e._v(" Confirmar ")])],1)],1)],1)],1)],1)},ot=[],ct=(r("4160"),r("159b"),{components:{Table:Be},data:function(){return{requiredRule:le,headers:[{text:"Título",align:"start",sortable:!1,value:"title"},{text:"Número de Registro",align:"start",sortable:!1,value:"registerNumber"},{text:"Descripción",align:"start",sortable:!1,value:"description"},{text:"Generos",align:"start",sortable:!1,value:"genres"},{text:"Rango de Edades",align:"start",sortable:!1,value:"ageRange"},{text:"Número de Páginas",align:"start",sortable:!1,value:"numberOfPages"},{text:"Número de Capitulos",align:"start",sortable:!1,value:"numberOfChapters"},{text:"Fase",align:"start",sortable:!1,value:"phase"},{text:"Acciones",actions:!0,sortable:!1}],userHeaders:[{text:"Nombre",align:"start",sortable:!1,value:"name"},{text:"Correo",sortable:!1,value:"email"}],dataTexts:[],dataReaders:[],dataWriters:[],dialogReject:!1,rejectingText:void 0,rejectDocument:void 0,adminTask:[{title:"Géneros",route:"/genres",hasPermission:tt.bind(this)("genreRead")},{title:"Usuarios",route:"/Usuarios",hasPermission:tt.bind(this)("userRead")},{title:"Roles",route:"/roleList",hasPermission:tt.bind(this)("roleRead")},{title:"Puntos de Venta",route:"/pointOfSale",hasPermission:tt.bind(this)("pointOfSaleRead")},{title:"Inventarios",route:"/inventarios",hasPermission:tt.bind(this)("inventoriesRead")},{title:"Reportes",route:"/reports",hasPermission:tt.bind(this)("reportsRead")},{title:"Reportes de Ventas",route:"/salesReports",hasPermission:tt.bind(this)("saleRead")},{title:"Ventas",route:"/sales",hasPermission:tt.bind(this)("saleRead")},{title:"Tiempos en Fase",route:"/tiempos",hasPermission:tt.bind(this)("reportsRead")},{title:"Eventos",route:"/event",hasPermission:tt.bind(this)("eventRead")}]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTexts();case 2:return t.next=4,e.composeReaders();case 4:return t.next=6,e.composeWriters();case 6:case"end":return t.stop()}}),t)})))()},methods:{getTexts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("texts/",r);case 3:a=t.sent,a.forEach((function(e){var t="";e.genres.forEach((function(e){t=""==t?e.name:t+", "+e.name})),e.genres=t})),console.log(a),e.dataTexts=a;case 7:case"end":return t.stop()}}),t)})))()},seeSuggestions:function(e){var t=e._id;this.$router.push("/Sugerencias_Texto/"+t)},advancePhase:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={title:"Avanzar",message:"¿Seguro que quieres avanzar el texto de fase?",styleOptions:{color:"primary"},onAccept:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=r.$cookies.get("token"),a.next=3,v("admins/texts/movePhase/"+e,{phase:t},n);case 3:r.getTexts();case 4:case"end":return a.stop()}}),a)})));function n(){return a.apply(this,arguments)}return n}(),onReject:function(){}},rs.$emit("dialog",n);case 2:case"end":return a.stop()}}),a)})))()},openRejectDialog:function(e){this.dialogReject=!0,this.rejectingText=e},closeRejectDialog:function(){this.dialogReject=!1,this.rejectingText=void 0,this.rejectDocument=void 0},rejectText:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new FormData,r.append("document",e.rejectDocument),a=e.$cookies.get("token"),t.next=5,v("texts/".concat(e.rejectingText._id,"/reject"),r,a,!0);case 5:return t.sent,e.closeRejectDialog(),t.next=9,e.getTexts();case 9:case"end":return t.stop()}}),t)})))()},composeReaders:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("/readers",r);case 3:a=t.sent,i=[],n=0;case 6:if(!(n<a.length)){t.next=14;break}return t.next=9,p("users/"+a[n].user._id,r);case 9:s=t.sent,i.push({name:s.name,email:s.email});case 11:n++,t.next=6;break;case 14:e.dataReaders=i;case 15:case"end":return t.stop()}}),t)})))()},composeWriters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("writers",r);case 3:a=t.sent,i=[],n=0;case 6:if(!(n<a.length)){t.next=14;break}return t.next=9,p("users/"+a[n].user._id,r);case 9:s=t.sent,i.push({name:s.name,email:s.email});case 11:n++,t.next=6;break;case 14:e.dataWriters=i;case 15:case"end":return t.stop()}}),t)})))()}}}),lt=ct,ut=(r("58fd"),Object(x["a"])(lt,it,ot,!1,null,"66ffbaad",null)),dt=ut.exports,mt={components:{writerDashboard:st,readerDashboard:Je,adminDashbaord:dt},data:function(){return{role:this.$cookies.get("user_type")}},methods:{}},pt=mt,vt=Object(x["a"])(pt,Pe,Te,!1,null,null,null),ft=vt.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[void 0===e.inventoryId&&e.userId!=e.writerId?r("h1",{attrs:{align:"center"}},[e._v(" No existe ese inventario")]):r("v-content",[r("div",{attrs:{align:"center"}},[r("h1",[e._v("Inventario")]),r("v-dialog",{attrs:{persistent:"","max-width":"2000px"},scopedSlots:e._u([e.userId==e.writerId?{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{color:"primary",dark:""}},a),[e._v("Agregar item")])]}}:null],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.edit?"Editar item":"Agregar item"))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Nombre",rules:[e.requiredRule]},model:{value:e.itemData.name,callback:function(t){e.$set(e.itemData,"name",t)},expression:"itemData.name"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",label:"Descripcion",rules:[e.requiredRule]},model:{value:e.itemData.description,callback:function(t){e.$set(e.itemData,"description",t)},expression:"itemData.description"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.numericRule],label:"Precio",prefix:"$"},model:{value:e.itemData.price,callback:function(t){e.$set(e.itemData,"price",t)},expression:"itemData.price"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.numericRule],label:"Cantidad disponible"},model:{value:e.itemData.stock,callback:function(t){e.$set(e.itemData,"stock",t)},expression:"itemData.stock"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Subir Imagen","prepend-icon":"mdi-camera"},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.linkRule],label:"link"},model:{value:e.itemData.link,callback:function(t){e.$set(e.itemData,"link",t)},expression:"itemData.link"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-autocomplete",{attrs:{items:e.categories,"item-text":"label","item-value":"value",label:"Categoria",clearable:"",required:"",rules:[function(){return null!==e.itemData.category||"Este campo es requerido"},e.requiredRule],disabled:e.viewMode,outlined:""},model:{value:e.itemData.category,callback:function(t){e.$set(e.itemData,"category",t)},expression:"itemData.category"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.addOrEditItem()}}},[e._v(e._s(e.edit?"Guardar":"Agregar"))]),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Cerrar")])],1)],1)],1),e.isDeleting?r("v-dialog",{model:{value:e.isDeleting,callback:function(t){e.isDeleting=t},expression:"isDeleting"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("¿Estas seguro de borrar "+e._s(e.currentItem.name)+"?")])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.deleteItem(e.currentItem._id)}}},[e._v("Si")]),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("No")])],1)],1)],1):e._e(),r("v-row",e._l(this.items,(function(t){return r("v-col",{key:t._id,attrs:{cols:"12",sm:"6",md:"3"}},[r("v-card",{staticClass:"mx-auto my-8",attrs:{"max-width":"374"}},[r("template",{slot:"progress"},[r("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),r("v-img",{attrs:{height:"250",src:void 0!==t.image?t.image:"https://semantic-ui.com/images/wireframe/image.png"}}),r("v-card-title",[e._v(e._s(t.name)+" "),r("v-spacer"),e.userId==e.writerId?r("v-btn",{attrs:{icon:"",color:"grey"},on:{click:function(r){return e.editItem(t)}}},[r("v-icon",[e._v("mdi-pencil")])],1):e._e()],1),r("v-card-text",{staticClass:"text-left"},[r("div",[e._v(e._s(t.description))])]),r("v-card-title",{staticStyle:{"margin-bottom":"-20px"}},[r("v-spacer"),e._v(" $ "+e._s(t.price))],1),r("v-card-text",{staticClass:"text-right",staticStyle:{"margin-bottom":"-20px"}},[r("div",[e._v("Cantidad: "+e._s(t.stock))])]),r("v-card-actions",[e.userId==e.writerId?r("v-btn",{attrs:{icon:"",color:"grey"},on:{click:function(r){return e.openDelete(t)}}},[r("v-icon",[e._v("mdi-trash-can-outline")])],1):e._e(),r("v-spacer"),r("v-btn",{attrs:{color:"deep-purple lighten-2",text:""},on:{click:function(r){return e.goTo(t.link?t.link:t.image)}}},[e._v(" Ver producto ")])],1)],2)],1)})),1)],1)])],1)},ht=[],bt=(r("a4d3"),r("e01a"),r("c740"),r("d3b7"),r("3ca3"),r("9911"),r("ddb0"),{components:{},data:function(){return{category:{label:"Libro",value:"Book"},categories:[{label:"Libro",value:"Book"},{label:"Mercancía",value:"Merchandise"}],inventoryId:void 0,userId:null,writerId:null,writerName:void 0,items:[],dialog:!1,itemData:{name:"",description:"",price:null,stock:null,link:""},image:null,currentItem:void 0,dialogSuccess:!1,dialogError:!1,edit:!1,isDeleting:!1,requiredRule:le,numericRule:ue,linkRule:me}},mounted:function(){this.writerId=this.$route.params.id,this.userId=this.$cookies.get("user_id"),void 0===this.writerId&&this.$router.push("/"),this.getInventories()},methods:{getInventories:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.prev=1,t.next=4,p("inventoryByWriter/"+e.writerId,r);case 4:a=t.sent,e.inventoryId=a._id,Promise.all(a.items.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.image){e.next=4;break}return e.next=3,p("productImage/".concat(t._id),r);case 3:a=e.sent;case 4:return console.log(a),e.abrupt("return",Object(l["a"])({},t,{image:a?"data:image/png;base64, "+a.file:void 0}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(t){return e.items=t})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getImage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=new FileReader;a.onerror=r,a.onload=function(){t(a.result)},a.readAsDataURL(e.image)})));case 1:case"end":return t.stop()}}),t)})))()},addOrEditItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,c,u,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(r=Object(l["a"])({},e.itemData,{image:void 0}),a=e.$cookies.get("token"),n=e.inventoryId,s=e.currentItem,t.prev=6,n){t.next=14;break}return o=e.$cookies.get("user_id"),t.next=11,v("inventory",r,a,!1,{writerId:o});case 11:c=t.sent,e.inventoryId=c._id,n=c._id;case 14:if(e.edit){t.next=20;break}return t.next=17,v("product",r,a,!1,{inventoryId:n});case 17:i=t.sent,t.next=23;break;case 20:return t.next=22,f("product/edit",r,a,!1,{id:s});case 22:i=t.sent;case 23:if(!e.image){t.next=32;break}return u=s||i._id,d=new FormData,d.append("image",e.image),t.next=29,e.getImage();case 29:return i.image=t.sent,t.next=32,v("productImage/".concat(u),d,a,!0);case 32:void 0!==e.items?(m=e.items.findIndex((function(e){return e._id===i._id})),-1!==m?e.items[m]=i:e.items.push(i)):e.items=[i],t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](6),console.log(t.t0);case 38:e.closeDialog();case 39:case"end":return t.stop()}}),t,null,[[6,35]])})))()},editItem:function(e){this.itemData={name:e.name,description:e.description,price:e.price,stock:e.stock,link:e.link,category:e.category},this.edit=!0,this.currentItem=e._id,this.dialog=!0},openDelete:function(e){this.currentItem=e,this.isDeleting=!0},deleteItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.$cookies.get("token"),n=t.inventoryId,r.next=5,f("product/delete",{},a,!1,{id:e,inventoryId:n});case 5:r.sent,t.items=t.items.filter((function(t){return t._id!=e})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:t.closeDialog();case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},closeDialog:function(){this.dialog=!1,this.isDeleting=!1,this.$refs.form.reset(),this.currentItem=void 0,this.edit=!1},goTo:function(e){if(me(e))window.open(e,"_blank");else{var t=new Image;t.src=e;var r=window.open("");r.document.write(t.outerHTML)}}}}),xt=bt,wt=(r("a124"),Object(x["a"])(xt,gt,ht,!1,null,"12055c42",null)),kt=wt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"background",staticStyle:{height:"100vh",overflow:"hidden"}},[r("v-card",{staticStyle:{"margin-right":"10%","margin-left":"10%","margin-top":"10%",height:"100vh"},attrs:{elevation:"10"}},[r("v-img",{staticStyle:{margin:"auto"},attrs:{src:"not-found.png",width:"300",position:"center center"}}),r("p",{staticClass:"display-4 font-weight-medium blue-grey--text text--darken-4 text-center mb-6"},[e._v(" Error 404 ")]),r("p",{staticClass:"display-1 blue-grey--text text--darken-3 text-center"},[e._v(" Pagina no encontrada ")])],1)],1)},Rt=[],yt={},St=yt,jt=(r("def1"),Object(x["a"])(St,_t,Rt,!1,null,"4dc5ab0a",null)),Ct=jt.exports,Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v("Usuarios")]),r("v-card",{staticStyle:{"margin-top":"25px"}},[r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-spacer"),r("v-select",{attrs:{"hide-details":"",dense:"",items:e.selectKeys,"prepend-inner-icon":"mdi-magnify",label:"Filtrar por"},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}})],1),[r("v-data-table",{attrs:{headers:e.userHeaders,items:e.filteredUsers,search:e.search,"item-key":"name"},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.items;return[r("tbody",e._l(a,(function(t,a){return r("tr",{key:a,class:e.rowClass(t)},[r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.email))]),r("td",{staticClass:"center-td"},[t.isreader?r("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check-circle ")]):e._e()],1),r("td",{staticClass:"center-td"},[t.iswriter?r("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check-circle ")]):e._e()],1),r("td",{staticClass:"center-td"},[t.isadmin?r("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check-circle ")]):e._e()],1),r("td",[r("v-row",[r("div",{staticStyle:{margin:"5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[r("v-btn",e._g(e._b({attrs:{disabled:!t.isadmin||"Admin 1"==t.name,small:"",color:"success"},on:{click:function(){e.$router.push("RoleSet/"+t._id)}}},"v-btn",s,!1),n),[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-account-multiple")])],1)]}}],null,!0)},[r("span",[e._v("Permisos de usuario")])])],1),r("div",{staticStyle:{margin:"5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[r("v-btn",e._g(e._b({attrs:{disabled:t.isadmin,small:"",color:"primary"},on:{click:function(){e.$router.push("RoleSet/"+t._id)}}},"v-btn",s,!1),n),[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-account-key")])],1)]}}],null,!0)},[r("span",[e._v("Hacer admin")])])],1),r("div",{staticStyle:{margin:"5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[r("v-btn",e._g(e._b({attrs:{disabled:t.isadmin,small:"",color:"error"},on:{click:function(r){return e.openDialog(t)}}},"v-btn",s,!1),n),[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-account-remove")])],1)]}}],null,!0)},[r("span",[e._v("Revocar acceso")])])],1)])],1)])})),0)]}}])}),r("div",{staticClass:"info-container"},[r("div",{staticClass:"red-square"}),r("div",[e._v("Lectores que han rechazado más de 5 textos seguidos")])])]],2),r("div",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"450"},model:{value:e.dialogStatus,callback:function(t){e.dialogStatus=t},expression:"dialogStatus"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Revocar acceso a "+e._s(this.selectedUser.name)+" ")]),r("v-card-text",[e._v(" Es probable que quieras primero enviar un aviso sobre su inactivdad al usuario antes de revocarle su acceso. ")]),r("v-card-actions",[r("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v(" Cancelar ")]),r("v-spacer"),r("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){return e.sendNotice()}}},[e._v(" Avisar ")]),r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.revokeAccess()}}},[e._v(" Revocar ")])],1)],1)],1)],1)],1)],1)},Et=[],Dt={data:function(){return{userHeaders:[{text:"Nombre",align:"start",sortable:!0,value:"name"},{text:"Correo",sortable:!0,value:"email"},{text:"Lector",align:"center",sortable:!0,value:"isreader"},{text:"Escritor",align:"center",sortable:!0,value:"iswriter"},{text:"Administrador",align:"center",sortable:!0,value:"isadmin"},{text:"Acciones",align:"center",sortable:!1,value:"actions"}],allUsers:[],filteredUsers:[],selectedUser:[],dialogStatus:!1,selectKeys:["Escritor","Lector","Administrador","Ninguno"],search:"",sortBy:""}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.composeUsers();case 2:case"end":return t.stop()}}),t)})))()},methods:{composeUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p("users");case 2:r=t.sent,r.forEach((function(e){e.roles.forEach((function(t){e["is".concat(t)]=!0}))})),e.allUsers=e.filteredUsers=r;case 5:case"end":return t.stop()}}),t)})))()},openDialog:function(e){this.dialogStatus=!0,this.selectedUser=e},closeDialog:function(){this.dialogStatus=!1},sendNotice:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogStatus=!1,t.next=3,p("/users/SendNotice/".concat(e.selectedUser._id));case 3:case"end":return t.stop()}}),t)})))()},revokeAccess:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogStatus=!1,t.next=3,g("/users/DeleteUser/".concat(e.selectedUser._id));case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))()},rowClass:function(e){return e.isreader?!e.reader||!e.reader.rejectsInARow||e.reader.rejectsInARow<6?"":"many-rejects-reader":""}},watch:{sortBy:function(e){switch(e){case"Escritor":this.filteredUsers=this.allUsers.filter((function(e){return 1==e.iswriter}));break;case"Lector":this.filteredUsers=this.allUsers.filter((function(e){return 1==e.isreader}));break;case"Administrador":this.filteredUsers=this.allUsers.filter((function(e){return 1==e.isadmin}));break;case"Ninguno":default:this.filteredUsers=this.allUsers;break}}}},$t=Dt,Pt=(r("cea0"),Object(x["a"])($t,Ot,Et,!1,null,"381d72b0",null)),Tt=Pt.exports,At=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-1 font-weight-medium",attrs:{align:"center"}},[e._v(" Actualizar rol a: "+e._s(this.user.name)+" ")]),r("div",{staticStyle:{"margin-top":"25px"}},[[r("v-data-table",{attrs:{headers:e.headers,items:e.roles,"item-key":"name","single-select":!0,"show-select":"","hide-default-footer":""},model:{value:e.selected_role,callback:function(t){e.selected_role=t},expression:"selected_role"}})]],2),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary"},on:{click:function(){e.$router.go(-1)}}},[e._v(" Cancelar ")]),r("v-btn",{attrs:{color:"success"},on:{click:e.save}},[e._v("Guardar")])],1)])},Mt=[],It="https://silma.herokuapp.com/api",qt=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],a=r?{"Content-Type":"multipart/form-data"}:{},e.next=4,d.a.get("".concat(It,"/").concat(t),{headers:Object(l["a"])({},a)});case 4:if(n=e.sent,!(n instanceof Error)){e.next=7;break}throw n;case 7:return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]&&i[2],n=a?{"Content-Type":"multipart/form-data"}:{},e.next=4,d.a.post("".concat(It,"/").concat(t),r,{headers:Object(l["a"])({},n)});case 4:if(s=e.sent,!(s instanceof Error)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]&&i[2],n=a?{"Content-Type":"multipart/form-data"}:{},e.next=4,d.a.patch("".concat(It,"/").concat(t),r,{headers:Object(l["a"])({},n)});case 4:if(s=e.sent,!(s instanceof Error)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]&&i[2],n=a?{"Content-Type":"multipart/form-data"}:{},e.next=4,d.a.delete("".concat(It,"/").concat(t),{headers:Object(l["a"])({},n)},r);case 4:if(s=e.sent,!(s instanceof Error)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function Wt(e){rs.$emit("snackbar",e)}function Bt(e){rs.$emit("globalLoading",e)}var zt=r("3835"),Gt=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return e.replace(/{(\d+)}/g,(function(e,t){var a=Object(zt["a"])(t,1),n=a[0];return r[n]}))},Ut={RequiredField:function(){return"Campo Requerido."},IncompleteForm:function(){return"Favor de llenar todos los valores requeridos."},SomethingWentWrong:function(){return"Algo salió mal."},CRUDOperationSuccess:function(e){return Gt("Registro {0} con éxito.",e)},Unauthorized:function(){return"No Autorizado."}},Vt=Ut,Ht={name:"RoleSet",components:{},props:{},data:function(){return{headers:[{text:"Rol",value:"name"}],roles:[],id:"",user:"",actualRole:"",newRole:"",selected_role:[],isNewAdmin:!1}},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.id){t.next=11;break}return t.next=4,qt("/users/".concat(e.id));case 4:return e.user=t.sent,e.setAdminInfo(e.user),t.next=8,qt("role",!1);case 8:e.roles=t.sent,e.roles.push({name:"Ninguno"}),e.preSelectRole();case 11:t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r),e.$router.go(-1);case 18:case"end":return t.stop()}}),t,null,[[0,13]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.selected_role[0],e.isNewAdmin?"Ninguno"!=r.name&&e.createNewAdmin(r):"Ninguno"!=r.name?e.updateRole(r):e.deleteAdmin(r),e.$router.go(-1);case 3:case"end":return t.stop()}}),t)})))()},preSelectRole:function(){var e=this;this.roles.forEach((function(t){e.newRole._id==t._id&&e.selected_role.push(t)}))},setAdminInfo:function(e){var t=e.admin;t?this.actualRole=this.newRole=t.role:(this.actualRole=this.newRole={name:"Ninguno"},this.isNewAdmin=!0)},updateRole:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ft("adminsSetRole/".concat(t.user.admin._id,"/").concat(e._id));case 3:Wt(Vt.CRUDOperationSuccess("actualizado")),r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},createNewAdmin:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={user:t.user._id,role:e._id},r.prev=1,r.next=4,Lt("/admins/makeAdmin",a);case 4:Wt(Vt.CRUDOperationSuccess("actualizado")),r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](1),n=et(r.t0,Vt.SomethingWentWrong()),Wt(n);case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()},deleteAdmin:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt("/admins/removeAdmin/".concat(t.user._id));case 3:Wt(Vt.CRUDOperationSuccess("actualizado")),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),r=et(e.t0,Vt.SomethingWentWrong()),Wt(r);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},mounted:function(){this.id=this.$route.params.id,this.dataInit()},computed:{}},Yt=Ht,Kt=Object(x["a"])(Yt,At,Mt,!1,null,null,null),Zt=Kt.exports,Jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Géneros")]),r("div",{staticClass:"add-btn-container"},[e.hasPermission("genreCreate")?r("v-btn",{attrs:{color:"primary"},on:{click:function(){return e.$router.push("/genre/create")}}},[e._v("Agregar")]):e._e()],1),r("div",{staticClass:"table-wrapper"},[r("Table",{attrs:{items:e.genres,headers:e.headers},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[e.hasPermission("genreRead")?r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){e.$router.push("genre/view/"+a._id)}}},[e._v("Ver")]):e._e(),e.hasPermission("genreEdit")?r("v-btn",{attrs:{small:"",color:"primary",disabled:!1,depressed:""},on:{click:function(){e.$router.push("genre/edit/"+a._id)}}},[e._v("Editar")]):e._e(),e.hasPermission("genreDelete")?r("v-btn",{attrs:{small:"",color:"error",disabled:!1,depressed:""},on:{click:function(){return e.deleteGenre(a._id)}}},[e._v("Eliminar")]):e._e()],1)]}}])})],1)])},Qt=[],Xt={data:function(){return{loading:!1}},methods:{updateLoading:function(e){this.loading=e,Bt(e)}}},er={components:{Table:Be},mixins:[Xt],data:function(){return{hasPermission:tt,genres:[],headers:[{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Acciones",sortable:!1,actions:!0}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),t.next=3,e.getGenres();case 3:e.updateLoading(!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("genre/search",!1);case 3:e.genres=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteGenre:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Nt("genre/".concat(e));case 3:return r.next=5,t.getGenres();case 5:Wt(Vt.CRUDOperationSuccess("eliminado")),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},tr=er,rr=(r("61fb"),Object(x["a"])(tr,Jt,Qt,!1,null,"7c0c85fa",null)),ar=rr.exports,nr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Género")]),r("v-form",{ref:"form",staticClass:"main-container",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.genre.name,callback:function(t){e.$set(e.genre,"name",t)},expression:"genre.name"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Nombre"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-textarea",{attrs:{disabled:e.viewMode},model:{value:e.genre.description,callback:function(t){e.$set(e.genre,"description",t)},expression:"genre.description"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Descripción")])],2),r("h2",[e._v("Subgéneros")]),e.viewMode?e._e():r("div",{staticClass:"add-btn-container"},[r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),function(){return e.showSubgenreFormModal=!0}()}}},[e._v("Agregar")])],1),r("Table",{attrs:{items:e.genre.subgenres,headers:e.subgenresTableHeaders},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){return e.openSubgenre(a,!0)}}},[e._v("Ver")]),r("v-btn",{attrs:{small:"",color:"primary",disabled:e.viewMode,depressed:""},on:{click:function(){return e.openSubgenre(a,!1)}}},[e._v("Editar")]),r("v-btn",{attrs:{small:"",color:"error",disabled:e.viewMode,depressed:""},on:{click:function(){return e.deleteSubgenre(a)}}},[e._v("Eliminar")])],1)]}}])})],1),e.showSubgenreFormModal?r("SubgenreFormModal",{attrs:{viewMode:e.viewMode||e.modalInViewMode,subgenreEdit:e.subgenreEdit},on:{save:e.addSubgenre,close:e.closeSubgenreModal}}):e._e(),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:function(){e.$router.go(-1)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",disabled:e.loading||e.viewMode},on:{click:e.save}},[e._v("Guardar")])],1)],1)},sr=[],ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" Subgénero ")]),r("v-card-text",[r("v-form",{ref:"form",staticClass:"main-container",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.subgenre.name,callback:function(t){e.$set(e.subgenre,"name",t)},expression:"subgenre.name"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Nombre"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-textarea",{attrs:{disabled:e.viewMode},model:{value:e.subgenre.description,callback:function(t){e.$set(e.subgenre,"description",t)},expression:"subgenre.description"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Descripción")])],2)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:e.close}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",disabled:e.viewMode},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)},or=[],cr={name:"SubgenreFormModal",props:{subgenreEdit:{type:Object},viewMode:{type:Boolean,required:!0}},data:function(){return{Messages:Vt,dialog:!0,valid:!0,subgenre:{name:"",description:""}}},mounted:function(){this.subgenreEdit&&(this.subgenre=Object(l["a"])({},this.subgenreEdit))},methods:{save:function(){this.$refs.form.validate()?this.$emit("save",this.subgenre):Wt(Vt.IncompleteForm())},close:function(){this.$emit("close")}}},lr=cr,ur=Object(x["a"])(lr,ir,or,!1,null,"548551a6",null),dr=ur.exports,mr={data:function(){return{loading:!1}},methods:{updateLoading:function(e){this.loading=e,Bt(e)}}},pr={props:{viewMode:{type:Boolean,required:!0}},mixins:[mr],components:{Table:Be,SubgenreFormModal:dr},data:function(){return{valid:!0,Messages:Vt,showSubgenreFormModal:!1,subgenreEdit:null,subgenreEditIndex:-1,modalInViewMode:!1,id:"",genre:{name:"",description:"",subgenres:[],subgenresToDelete:[]},subgenresTableHeaders:[{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Acciones",sortable:!1,actions:!0}]}},mounted:function(){this.id=this.$route.params.id,this.dataInit()},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return e.updateLoading(!0),t.next=4,e.getById();case 4:e.updateLoading(!1);case 5:case"end":return t.stop()}}),t)})))()},getById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("genre/".concat(e.id),!1);case 3:r=t.sent,e.genre=Object(l["a"])({},e.genre,{},r),t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0),a=et(t.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return Wt(Vt.IncompleteForm()),t.abrupt("return");case 3:if(t.prev=3,e.updateLoading(!0),!e.id){t.next=11;break}return t.next=8,e.update();case 8:Wt(Vt.CRUDOperationSuccess("actualizado")),t.next=14;break;case 11:return t.next=13,e.create();case 13:Wt(Vt.CRUDOperationSuccess("creado"));case 14:e.$router.go(-1),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](3),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 22:e.updateLoading(!1);case 23:case"end":return t.stop()}}),t,null,[[3,17]])})))()},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Lt("genre",e.genre,!1);case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ft("genre/".concat(e.id),e.genre,!1);case 2:case"end":return t.stop()}}),t)})))()},openSubgenre:function(e,t){this.subgenreEdit=Object(l["a"])({},e),this.subgenreEditIndex=this.genre.subgenres.findIndex((function(t){return t===e})),this.modalInViewMode=t,this.showSubgenreFormModal=!0},closeSubgenreModal:function(){this.subgenreEdit=null,this.subgenreEditIndex=-1,this.modalInViewMode=!1,this.showSubgenreFormModal=!1},addSubgenre:function(e){var t=this;-1!==this.subgenreEditIndex&&(this.genre.subgenres=this.genre.subgenres.filter((function(e,r){return r!==t.subgenreEditIndex}))),this.genre.subgenres.push(e),this.closeSubgenreModal()},deleteSubgenre:function(e){this.genre=Object(l["a"])({},this.genre,{subgenres:this.genre.subgenres.filter((function(t){return t!==e}))}),this.genre.subgenresToDelete.push(e)}}},vr=pr,fr=(r("17f8"),Object(x["a"])(vr,nr,sr,!1,null,"b6e8f9c2",null)),gr=fr.exports,hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Agregar Escrito ")]),r("br"),r("v-form",{ref:"form"},[r("h2",{staticClass:"primary--text"},[e._v("Datos del Escrito")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{outlined:"",label:"Título",rules:[e.requiredRule]},model:{value:e.text.title,callback:function(t){e.$set(e.text,"title",t)},expression:"text.title"}})],1),r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-text-field",{attrs:{outlined:"",label:"Registro de derechos de autor",rules:[e.requiredRule]},model:{value:e.text.registerNumber,callback:function(t){e.$set(e.text,"registerNumber",t)},expression:"text.registerNumber"}})],1),r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-text-field",{attrs:{outlined:"",label:"# de páginas",rules:[e.requiredRule,e.numericRule]},model:{value:e.text.numberOfPages,callback:function(t){e.$set(e.text,"numberOfPages",t)},expression:"text.numberOfPages"}})],1),r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-text-field",{attrs:{outlined:"",label:"# de capítulos",rules:[e.requiredRule,e.numericRule]},model:{value:e.text.numberOfChapters,callback:function(t){e.$set(e.text,"numberOfChapters",t)},expression:"text.numberOfChapters"}})],1),r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-select",{attrs:{outlined:"",label:"Rango edad",items:e.ageRanges,rules:[e.requiredRule]},model:{value:e.text.ageRange,callback:function(t){e.$set(e.text,"ageRange",t)},expression:"text.ageRange"}})],1)],1),r("p",[e._v("Seleccionar géneros (Máximo 3)")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"4"}},[e.refresher?r("v-treeview",{attrs:{items:e.allGenres,selectable:""},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item;return[r("i",{staticClass:"glyphicon glyphicon-info-sign",on:{mouseover:function(t){return e.showDescription(a)},mouseleave:function(t){e.showGenreDescription=!1}}})]}}],null,!1,4128437552),model:{value:e.text.genres,callback:function(t){e.$set(e.text,"genres",t)},expression:"text.genres"}}):e._e()],1)],1),r("v-layout",{staticClass:"justify-center",attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"12"}},[r("v-textarea",{attrs:{outlined:"",label:"Descripción",rules:[e.requiredRule]},model:{value:e.text.description,callback:function(t){e.$set(e.text,"description",t)},expression:"text.description"}})],1)],1),r("p",[e._v("Los archivos deberán subirse con el formato de Common Mark.")]),r("p",[e._v(" Los capítulos tendrán que ser indicados como encabezados (Heading 1) ")]),r("a",{attrs:{href:"https://commonmark.org/help/",target:"_blank"}},[e._v("Presiona aquí para más información")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-file-input",{attrs:{accept:".md",label:"Subir Archivo",rules:[e.requiredRule]},model:{value:e.document,callback:function(t){e.document=t},expression:"document"}})],1),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-dialog",{attrs:{width:"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.previewData}},a),[e._v("Vista Previa")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[e._v("Previa visualización del escrito")]),r("v-card-text",{attrs:{id:"commonMarkHTML"},domProps:{innerHTML:e._s(e.data)}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Escrito Registrado!")]),r("v-card-text",[e._v("Tu escrito ya se encuentra registrado")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:"",href:"/"},on:{click:function(t){e.dialogSuccess=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.errorMessage.title))]),r("v-card-text",[e._v(e._s(e.errorMessage.message))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Entendido")])],1)],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{align:"end"}},[r("v-btn",{attrs:{color:"success",disabled:this.isDisabled},on:{click:e.create}},[e._v("Registrar")])],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"45%"},model:{value:e.showGenreDescription,callback:function(t){e.showGenreDescription=t},expression:"showGenreDescription"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.genreToShowDescription.name)+" ")]),r("v-card-text",[e._v(" "+e._s(e.genreToShowDescription.description)+" ")])],1)],1)],1)},br=[],xr={components:{},data:function(){return{text:{writer:this.$cookies.get("user_id"),title:"",registerNumber:"",description:"",genres:[],numberOfPages:"",ageRange:"",phase:1,documentPath:"",numberOfChapters:""},errorMessage:{title:"",text:""},isDisabled:!1,dialogSuccess:!1,selectionType:"leaf",dialogError:!1,requiredRule:le,document:null,allGenres:[],ageRanges:H,numericRule:ue,data:null,dialog:!1,genreToShowDescription:{name:"",description:""},showGenreDescription:!1,refresher:!0}},asyncComputed:{getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("user/genres",r);case 3:for(e.allGenres=t.sent,a=0;a<e.allGenres.length;a++)if(e.allGenres[a].id=e.allGenres[a]._id,e.allGenres[a].children.length>0)for(n=0;n<e.allGenres[a].children.length;n++)e.allGenres[a].children[n].id=e.allGenres[a].children[n]._id;case 5:case"end":return t.stop()}}),t)})))()}},methods:{getFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=new FileReader;a.onerror=r,a.onload=function(){t(a.result)},a.readAsText(e.document)})));case 1:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(!(e.text.genres.length<1||e.text.genres.length>3)){t.next=6;break}return e.errorMessage=J,e.dialogError=!0,t.abrupt("return");case 6:return t.next=8,e.getFile();case 8:if(r=t.sent,!(parseInt(e.text.numberOfChapters)<=0)){t.next=13;break}return e.errorMessage=ee,e.dialogError=!0,t.abrupt("return");case 13:if(a=Ue(r).length,a==parseInt(e.text.numberOfChapters)){t.next=18;break}return e.errorMessage=X,e.dialogError=!0,t.abrupt("return");case 18:if(!(e.text.description.length<20||e.text.description.length>200)){t.next=22;break}return e.errorMessage=Q,e.dialogError=!0,t.abrupt("return");case 22:return e.isDisabled=!0,t.prev=23,n=e.$cookies.get("token"),t.next=27,v("texts",e.text,n);case 27:return s=t.sent,i=s._id,o=new FormData,o.append("document",e.document),t.next=33,v("texts/".concat(i,"/uploads"),o,n,!0);case 33:e.dialogSuccess=!0,t.next=41;break;case 36:t.prev=36,t.t0=t["catch"](23),e.errorMessage=K,e.dialogError=!0,e.isDisabled=!1;case 41:case"end":return t.stop()}}),t,null,[[23,36]])})))()},previewData:function(){var e=this;if(this.document){var t=new FileReader;t.readAsText(this.document),t.onload=function(){e.data=Ve(t.result)}}else this.data="No se ha seleccionado ningún archivo"},showDescription:function(e){this.genreToShowDescription=e,""==this.genreToShowDescription.description&&(this.genreToShowDescription.description="Ups!, El género que buscas no cuenta con descripción."),this.showGenreDescription=!0},dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("texts/".concat(e.id),r);case 3:a=t.sent,e.text=a[0],e.refresher=!1,e.$nextTick((function(){e.text.genres=e.text.genres.map((function(e){return e._id})),e.refresher=!0}));case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.id){t.next=4;break}return e.id=e.$route.params.id,t.next=4,e.dataInit();case 4:case"end":return t.stop()}}),t)})))()}},wr=xr,kr=Object(x["a"])(wr,hr,br,!1,null,"27072d78",null),_r=kr.exports,Rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Retroalimentación de "+e._s(e.textTitle)+" ")]),r("br"),r("v-form",{ref:"form"},[r("h2",{staticClass:"primary--text"},[e._v("¿Debería publicarse el libro?")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-radio-group",{attrs:{rules:[e.requiredRule],row:""},model:{value:e.feedback.publish,callback:function(t){e.$set(e.feedback,"publish",t)},expression:"feedback.publish"}},[r("v-radio",{attrs:{label:"Si",value:"Yes",color:"success"}}),r("v-radio",{attrs:{label:"No",value:"No",color:"success"}})],1)],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" La primera vez que dejaste de leer el texto, ¿en qué página te quedaste? ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-text-field",{attrs:{outlined:"",rules:[e.requiredRule,e.numericRule]},model:{value:e.feedback.page,callback:function(t){e.$set(e.feedback,"page",t)},expression:"feedback.page"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"12"}},[r("h2",{staticClass:"primary--text"},[e._v(" El género del libro es (selecciona todos los que apliquen): ")])]),e._l(e.genres,(function(t){return r("v-col",{key:t.name,attrs:{cols:"12",sm:"3"}},[r("v-switch",{attrs:{label:t.name,color:"success",value:t.name},model:{value:e.genresNames,callback:function(t){e.genresNames=t},expression:"genresNames"}})],1)}))],2),r("h2",{staticClass:"primary--text"},[e._v(" Comenta algo que te haya gustado mucho de la lectura ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{outlined:"",rules:[e.requiredRule]},model:{value:e.feedback.liked,callback:function(t){e.$set(e.feedback,"liked",t)},expression:"feedback.liked"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" Comenta algo que no te haya gustado de la lectura ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{outlined:"",rules:[e.requiredRule]},model:{value:e.feedback.disliked,callback:function(t){e.$set(e.feedback,"disliked",t)},expression:"feedback.disliked"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" Mi personaje favorito fue (coméntanos por qué) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{outlined:"",rules:[e.requiredRule]},model:{value:e.feedback.goodCharacter,callback:function(t){e.$set(e.feedback,"goodCharacter",t)},expression:"feedback.goodCharacter"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" El personaje que menos me gusto fue (coméntanos por qué) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{outlined:"",rules:[e.requiredRule]},model:{value:e.feedback.badCharacter,callback:function(t){e.$set(e.feedback,"badCharacter",t)},expression:"feedback.badCharacter"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" En general el libro, No me gustó (1) - Lo amé (10) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-radio-group",{attrs:{rules:[e.requiredRule],row:""},model:{value:e.feedback.grade,callback:function(t){e.$set(e.feedback,"grade",t)},expression:"feedback.grade"}},e._l(10,(function(e){return r("v-radio",{key:e,attrs:{label:String(e),value:e,color:"success"}})})),1)],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Se recibio tu retroalimentación!")]),r("v-card-text",[e._v("Serás reenviado a tu dashboard")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:"",href:"/"},on:{click:function(t){e.dialogSuccess=!1}}},[e._v("Entendido")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.errorMessage.title))]),r("v-card-text",[e._v(e._s(e.errorMessage.message))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Entendido")])],1)],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{align:"end"}},[r("v-btn",{attrs:{color:"success"},on:{click:e.create}},[e._v("Concluir")])],1)],1)],1)},yr=[],Sr={data:function(){return{feedback:{reader:this.$cookies.get("user_id"),suggestion:this.$route.params.id,selectedGenres:[],publish:"",page:"",grade:"",badCharacter:"",goodCharacter:"",liked:"",disliked:""},errorMessage:{title:"",message:""},genresNames:[],dialogSuccess:!1,dialogError:!1,genres:[],textTitle:"",requiredRule:le,numericRule:ue,errorServerRegister:K,errorPreferencesMinimun:Z}},asyncComputed:{getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("/user/genres",r);case 3:return a=t.sent,t.abrupt("return",e.genres=a);case 5:case"end":return t.stop()}}),t)})))()},getSuggestion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),a=e.$route.params,e.feedback.suggestion=a.id,t.next=5,p("/suggestions/feedback/"+e.feedback.suggestion,r);case 5:return n=t.sent,t.next=8,p("/texts/"+n.text,r);case 8:s=t.sent,e.textTitle=s.title;case 10:case"end":return t.stop()}}),t)})))()}},methods:{preferenceId:function(e){var t,r=Object(q["a"])(this.genres);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(e==a.name)return a._id}}catch(n){r.e(n)}finally{r.f()}},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,!(e.genresNames.length<3)){t.next=7;break}return e.errorMessage=e.errorPreferencesMinimun,e.dialogError=!0,t.abrupt("return");case 7:r=Object(q["a"])(e.genresNames);try{for(r.s();!(a=r.n()).done;)n=a.value,e.feedback.selectedGenres.push(e.preferenceId(n))}catch(o){r.e(o)}finally{r.f()}return s=e.$cookies.get("token"),t.next=12,v("/register/feedback",e.feedback,s);case 12:return t.next=14,v("/suggestions/"+e.feedback.suggestion+"/complete",{},s);case 14:return t.next=16,p("/suggestions/feedback/"+e.feedback.suggestion,s);case 16:return i=t.sent,t.next=19,v("/readers/review/"+i.reader,{},s);case 19:e.dialogSuccess=!0,t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](2),e.errorMessage=e.errorServerRegister,e.dialogError=!0;case 26:case"end":return t.stop()}}),t,null,[[2,22]])})))()}}},jr=Sr,Cr=Object(x["a"])(jr,Rr,yr,!1,null,"89594264",null),Or=Cr.exports,Er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{attrs:{align:"left"}},[e._v("Textos Recibidos para "+e._s(e.textData.title))]),[r("v-row",{attrs:{justify:"center"}},[r("v-dialog",{attrs:{persistent:"","max-width":"2000px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{color:"primary",dark:""}},a),[e._v("Agregar Sugerencias")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Añadir Sugerencia")])]),r("v-card-text",[r("v-container",[r("Table",{attrs:{headers:e.headersReadersNoSuggestion,items:e.readersNoSuggestion},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticStyle:{"padding-top":"5px"}},[r("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.sendSuggestion(a)}}},[e._v("Seleccionar Lector")])],1)]}}])})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cerrar")])],1)],1)],1)],1)],r("Table",{attrs:{headers:e.headersSuggestions,items:e.dataSuggestions},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticStyle:{"padding-top":"5px"}},[r("v-btn",{attrs:{small:"",color:"error",depressed:""},on:{click:function(t){return e.deleteSuggestion(a)}}},[e._v("Eliminar")])],1),r("div",{staticStyle:{"padding-top":"5px"}},[r("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Completado"==a.status,expression:"props.status == 'Completado'"}],attrs:{small:"",color:"success",href:a.feedback_url}},[e._v("Retroalimentacion")])],1)]}}])}),r("DialogComponent",{ref:"confirm"})],2)},Dr=[],$r={components:{Table:Be,DialogComponent:E},data:function(){return{headersSuggestions:[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"E-mail",align:"start",sortable:!1,value:"email"},{text:"Fecha de Envío",align:"start",sortable:!1,value:"sentDate"},{text:"Estatus",align:"start",sortable:!1,value:"status"},{text:"# Capitulos Pedidos",align:"start",sortable:!1,value:"readingChapters"},{text:"Puntaje",align:"start",sortable:!1,value:"score"},{text:"Acciones",actions:!0,sortable:!1}],dataSuggestions:[],readersNoSuggestion:[],headersReadersNoSuggestion:[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"E-mail",align:"start",sortable:!1,value:"email"},{text:"Fecha ultima Sugerencia",align:"start",sortable:!1,value:"lastReview"},{text:"Disponibilidad Desde",align:"start",sortable:!1,value:"readFrom"},{text:"Disponibilidad Hasta",align:"start",sortable:!1,value:"readTill"},{text:"Preferencias",align:"start",sortable:!1,value:"genres"},{text:"Velocidad de Lectura",align:"start",sortable:!1,value:"readingProficiency"}],dialog:!1,textData:{}}},created:function(){this.getTextInfo(),this.getSuggestions(),this.getReadersWithoutSuggestion()},methods:{deleteSuggestion:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.$cookies.get("token"),n={title:"Eliminar",message:"Seguro que quieres eliminar?",styleOptions:{color:"primary"},onAccept:function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,g("admins/suggestions/deleteSuggestion/"+e.suggestion_id,a);case 2:t.getTextInfo(),t.getSuggestions(),t.getReadersWithoutSuggestion();case 5:case"end":return r.stop()}}),r)})));function n(){return r.apply(this,arguments)}return n}(),onReject:function(){}},rs.$emit("dialog",n);case 3:case"end":return r.stop()}}),r)})))()},getSuggestions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("admins/suggestions/getTextSuggestions/"+e.$route.params.id,r);case 3:a=t.sent,n=[],a.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p("readers/"+t.reader,r);case 2:if(a=e.sent,s="","Completed"!=t.suggestionStatus){e.next=9;break}return e.next=7,p("/admins/feedbacks/"+t._id,r);case 7:i=e.sent,s="/Retroalimentacion/"+i;case 9:o={name:a.user.name,email:a.user.email,status:He(t.suggestionStatus),sentDate:W()(new Date(t.sentDate)).format("DD/MM/YYYY"),readingChapters:t.readingChapters,score:t.score,reader_id:a.reader,text_id:t.reader,suggestion_id:t._id,feedback_url:s},n.push(o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.dataSuggestions=n;case 7:case"end":return t.stop()}}),t)})))()},getTextInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("texts/"+e.$route.params.id,r);case 3:a=t.sent,e.textData=a;case 5:case"end":return t.stop()}}),t)})))()},getReadersWithoutSuggestion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("suggestions/getReadersWithoutSuggestion/"+e.$route.params.id,r);case 3:a=t.sent,n=[],a.forEach((function(e){var t="";e.preferences.forEach((function(e){t=""==t?e.name:t+", "+e.name}));var r={id:e._id,name:e.user.name,email:e.user.email,lastReview:W()(new Date(e.lastReview)).format("DD/MM/YYYY"),readFrom:W()(new Date(e.readFrom)).format("DD/MM/YYYY"),readTill:W()(new Date(e.readTill)).format("DD/MM/YYYY"),genres:t,readingProficiency:e.readingProficiency};n.push(r)})),e.readersNoSuggestion=n;case 7:case"end":return t.stop()}}),t)})))()},sendSuggestion:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.$cookies.get("token"),r.next=3,v("admins/suggestions/createSuggestions/",{reader_id:e.id,book_id:t.textData._id,numberOfPages:t.textData.numberOfPages},a);case 3:t.getTextInfo(),t.getSuggestions(),t.getReadersWithoutSuggestion(),t.dialog=!1;case 7:case"end":return r.stop()}}),r)})))()}}},Pr=$r,Tr=Object(x["a"])(Pr,Er,Dr,!1,null,null,null),Ar=Tr.exports,Mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" "+e._s(this.text.title)+" ")]),r("br"),r("p",{attrs:{align:"center"}},[e._v("Capítulos mostrados: "+e._s(this.chaptersRequired))]),r("v-card",[r("v-card-title",{staticClass:"grey lighten-4"},[e._v(e._s(this.text.description)+" ")]),r("v-card-text",{attrs:{id:"commonMarkHTML"},domProps:{innerHTML:e._s(e.data)}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"blue darken-1",attrs:{color:"white",text:""},on:{click:e.moreChapters}},[e._v("Pedir más capítulos")]),r("v-btn",{staticClass:"green darken-2",attrs:{color:"white",text:"",href:"/Cuestionario_de_lectura/"+this.suggestionId}},[e._v("Llenar retroalimentación")])],1)],1),r("br"),r("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.dialogUpdate,callback:function(t){e.dialogUpdate=t},expression:"dialogUpdate"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.errorMessage.title))]),r("v-card-text",[e._v(e._s(e.errorMessage.message))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"gray darken-1",text:""},on:{click:function(t){e.dialogUpdate=!1}}},[e._v("Entendido")])],1)],1)],1)],1)},Ir=[],qr=(r("fb6a"),r("25f0"),{components:{},data:function(){return{title:"Cargando..",suggestionId:this.$route.params.id,suggestion:"",text:"",allChapters:"",data:"",chaptersRequired:"Cargando..",chaptersTotal:0,dialogUpdate:!1,errorMessage:{title:"",text:""}}},asyncComputed:{visualizeChapters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("suggestions/".concat(e.suggestionId),r);case 3:return e.suggestion=t.sent,e.text=e.suggestion.text,t.next=7,p("/texts/".concat(e.text._id,"/uploads"),r);case 7:a=t.sent,e.allChapters=a.message,e.chaptersRequired=e.suggestion.readingChapters,e.chaptersTotal=e.text.numberOfChapters,e.cropChapters();case 12:case"end":return t.stop()}}),t)})))()}},methods:{moreChapters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.chaptersRequired>=e.chaptersTotal)){t.next=4;break}return e.errorMessage=te,e.dialogUpdate=!0,t.abrupt("return");case 4:return e.chaptersRequired+5>e.chaptersTotal?e.chaptersRequired=e.chaptersTotal:e.chaptersRequired=e.chaptersRequired+5,r=e.$cookies.get("token"),e.suggestion.readingChapters=e.chaptersRequired,t.next=9,v("suggestions/".concat(e.suggestion._id,"/requestChapters"),e.suggestion,r);case 9:return e.cropChapters(),e.errorMessage=re,e.dialogUpdate=!0,t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))()},cropChapters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],r=e.chaptersRequired<=e.chaptersTotal?Ue(e.allChapters).slice(0,e.chaptersRequired).toString():e.allChapters,e.data=Ve(r);case 3:case"end":return t.stop()}}),t)})))()}}}),Lr=qr,Fr=Object(x["a"])(Lr,Mr,Ir,!1,null,"562d12ee",null),Nr=Fr.exports,Wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Listado de Roles")]),r("div",{staticClass:"add-btn-container"},[e.hasPermission("roleCreate")?r("v-btn",{attrs:{color:"primary"},on:{click:function(){return e.$router.push("/roleFormCreate")}}},[e._v("Agregar")]):e._e()],1),r("div",{staticClass:"table-wrapper"},[r("Table",{attrs:{items:e.roles,headers:e.headers},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[e.hasPermission("roleRead")?r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){e.$router.push("roleFormView/"+a._id)}}},[e._v("Ver")]):e._e(),e.hasPermission("roleEdit")&&!a.isBaseRole?r("v-btn",{attrs:{small:"",color:"primary",disabled:!1,depressed:""},on:{click:function(){e.$router.push("roleForm/"+a._id)}}},[e._v("Editar")]):e._e(),e.hasPermission("roleDelete")&&!a.isBaseRole?r("v-btn",{attrs:{small:"",color:"error",disabled:!1,depressed:""},on:{click:function(){return e.deleteRole(a._id)}}},[e._v("Eliminar")]):e._e()],1)]}}])})],1)])},Br=[],zr={name:"RoleList",components:{Table:Be},mixins:[Xt],data:function(){return{hasPermission:tt,headers:[{text:"Código",value:"code"},{text:"Nombre",value:"name"},{text:"Acciones",sortable:!1,actions:!0}],roles:[]}},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.updateLoading(!0),t.next=4,qt("role",!1);case 4:e.roles=t.sent,t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 12:e.updateLoading(!1);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteRole:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Nt("role/".concat(e));case 3:return r.next=5,t.dataInit();case 5:Wt(Vt.CRUDOperationSuccess("eliminado")),r.next=13;break;case 8:r.prev=8,r.t0=r["catch"](0),console.error(r.t0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 13:case"end":return r.stop()}}),r,null,[[0,8]])})))()}},mounted:function(){this.dataInit()},computed:{}},Gr=zr,Ur=(r("0f9b"),Object(x["a"])(Gr,Wr,Br,!1,null,"fd5294d4",null)),Vr=Ur.exports,Hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Rol")]),r("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Código"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Nombre"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("PermissionsTable",{attrs:{role:e.form,viewMode:e.viewMode},on:{permissionChanged:e.updateRole}})],1),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:function(){e.$router.go(-1)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"success",disabled:e.loading||e.viewMode},on:{click:e.save}},[e._v("Guardar")])],1)],1)},Yr=[],Kr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.permissionsMatrix,"items-per-page":10,"single-expand":"","show-expand":"",expanded:e.expanded},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item,n=t.expand,s=t.isExpanded;return[r("tr",[r("td",[a.specialPermissions.length>0?r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return n(!s)}}},[e._v("Expandir")]):e._e()],1),r("td",[e._v(e._s(a.display))]),r("td",[a.hasReadPermission?r("v-switch",{attrs:{value:a[a.name+"Read"],disabled:e.viewMode},on:{change:function(t){return e.permissionChanged(a.name+"Read",t)}}}):e._e()],1),r("td",[a.hasCreatePermission?r("v-switch",{attrs:{value:a[a.name+"Create"],disabled:e.viewMode},on:{change:function(t){return e.permissionChanged(a.name+"Create",t)}}}):e._e()],1),r("td",[a.hasEditPermission?r("v-switch",{attrs:{value:a[a.name+"Edit"],disabled:e.viewMode},on:{change:function(t){return e.permissionChanged(a.name+"Edit",t)}}}):e._e()],1),r("td",[a.hasDeletePermission?r("v-switch",{attrs:{value:a[a.name+"Delete"],disabled:e.viewMode},on:{change:function(t){return e.permissionChanged(a.name+"Delete",t)}}}):e._e()],1)])]}},{key:"expanded-item",fn:function(t){var a=t.headers,n=t.item;return e._l(n.specialPermissions,(function(t,s){return r("tr",{key:s},[r("td",{attrs:{colspan:a.length}},[r("div",{staticClass:"special-permission-container"},[r("v-checkbox",{attrs:{disabled:e.viewMode},on:{change:function(r){return e.permissionChanged(t.name,r)}},model:{value:n[t.name],callback:function(r){e.$set(n,t.name,r)},expression:"item[specialPermission.name]"}},[r("template",{slot:"prepend"},[e._v(e._s(t.display))])],2)],1)])])}))}}])})},Zr=[],Jr={name:"PermissionsTable",props:{role:{type:Object,required:!0},viewMode:{type:Boolean,required:!0}},data:function(){return{headers:[{text:"Funcionalidad",value:"name",sortable:!0},{text:"Ver",value:"",sortable:!1},{text:"Crear",value:"",sortable:!1},{text:"Modificar",value:"",sortable:!1},{text:"Eliminar",value:"",sortable:!1}],expanded:[]}},methods:{permissionChanged:function(e,t){this.$emit("permissionChanged",e,!!t)},test:function(e){console.log(e)}},mounted:function(){},computed:{permissionsMatrix:function(){var e=this,t=[{display:"Lecturas",name:"reading",hasReadPermission:!0,hasCreatePermission:!1,hasEditPermission:!1,hasDeletePermission:!1,specialPermissions:[{display:"Avanzar Fase",name:"advancePhase"}]},{display:"Obras",name:"book",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Usuarios",name:"user",hasReadPermission:!0,hasCreatePermission:!1,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Eventos",name:"event",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Reportes",name:"report",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Roles",name:"role",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Géneros",name:"genre",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]},{display:"Puntos de Venta",name:"pointOfSale",hasReadPermission:!0,hasCreatePermission:!0,hasEditPermission:!0,hasDeletePermission:!0,specialPermissions:[]}],r=t.map((function(t){var r=t.hasReadPermission,a=t.hasCreatePermission,n=t.hasEditPermission,s=t.hasDeletePermission,i=t.specialPermissions,o={display:t.display,name:t.name,hasReadPermission:r,hasCreatePermission:a,hasEditPermission:n,hasDeletePermission:s,specialPermissions:i};return r&&(o["".concat(t.name,"Read")]=e.role[["".concat(t.name,"Read")]]),a&&(o["".concat(t.name,"Create")]=e.role[["".concat(t.name,"Create")]]),n&&(o["".concat(t.name,"Edit")]=e.role[["".concat(t.name,"Edit")]]),s&&(o["".concat(t.name,"Delete")]=e.role[["".concat(t.name,"Delete")]]),t.specialPermissions.length>0&&t.specialPermissions.forEach((function(t){return o[t.name]=e.role[t.name]})),o}));return r}}},Qr=Jr,Xr=(r("65a7"),Object(x["a"])(Qr,Kr,Zr,!1,null,"5b286cc0",null)),ea=Xr.exports,ta={name:"RoleForm",components:{PermissionsTable:ea},mixins:[mr],props:{viewMode:{type:Boolean,required:!0}},data:function(){return{valid:!0,Messages:Vt,form:{name:"",readingRead:!1,readingCreate:!1,readingEdit:!1,readingDelete:!1,bookRead:!1,bookCreate:!1,bookEdit:!1,bookDelete:!1,phaseRead:!1,phaseCreate:!1,phaseEdit:!1,phaseDelete:!1,userRead:!1,userCreate:!1,userEdit:!1,userDelete:!1,eventRead:!1,eventCreate:!1,eventEdit:!1,eventDelete:!1,reportRead:!1,reportCreate:!1,reportEdit:!1,reportDelete:!1,roleRead:!1,roleCreate:!1,roleEdit:!1,roleDelete:!1,genreRead:!1,genreCreate:!1,genreEdit:!1,genreDelete:!1},id:""}},methods:{updateRole:function(e,t){this.form[e]=t},dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.id){t.next=5;break}return t.next=4,qt("role/".concat(e.id));case 4:e.form=t.sent;case 5:t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r),e.$router.go(-1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return Wt(Vt.IncompleteForm()),t.abrupt("return");case 3:if(t.prev=3,e.updateLoading(!0),!e.id){t.next=11;break}return t.next=8,Ft("role/".concat(e.id),e.form);case 8:Wt(Vt.CRUDOperationSuccess("actualizado")),t.next=14;break;case 11:return t.next=13,Lt("role",e.form);case 13:Wt(Vt.CRUDOperationSuccess("creado"));case 14:e.$router.go(-1),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](3),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 21:e.updateLoading(!1);case 22:case"end":return t.stop()}}),t,null,[[3,17]])})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,e.updateLoading(!0),t.next=4,e.dataInit();case 4:e.updateLoading(!1);case 5:case"end":return t.stop()}}),t)})))()}},ra=ta,aa=Object(x["a"])(ra,Hr,Yr,!1,null,"0b4f3e1a",null),na=aa.exports,sa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("div",{staticClass:"display-3 font-weight-medium",attrs:{align:"center"}},[e._v(" Retroalimentación de "+e._s(e.textTitle)+" ")]),r("br"),r("v-form",{ref:"form"},[r("h2",{staticClass:"primary--text"},[e._v("¿Debería publicarse el libro?")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-radio-group",{attrs:{row:"",disabled:""},model:{value:e.feedback.publish,callback:function(t){e.$set(e.feedback,"publish",t)},expression:"feedback.publish"}},[r("v-radio",{attrs:{label:"Si",value:"Yes",color:"success"}}),r("v-radio",{attrs:{label:"No",value:"No",color:"success"}})],1)],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" La primera vez que dejaste de leer el texto, ¿en qué página te quedaste? ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"2"}},[r("v-text-field",{attrs:{readonly:"",outlined:""},model:{value:e.feedback.page,callback:function(t){e.$set(e.feedback,"page",t)},expression:"feedback.page"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"12"}},[r("h2",{staticClass:"primary--text"},[e._v(" El género del libro es (selecciona todos los que apliquen): ")])]),e._l(e.genres,(function(t){return r("v-col",{key:t.name,attrs:{cols:"12",sm:"3"}},[r("v-switch",{attrs:{disabled:"",label:t.name,color:"success",value:t.name},model:{value:e.genresNames,callback:function(t){e.genresNames=t},expression:"genresNames"}})],1)}))],2),r("h2",{staticClass:"primary--text"},[e._v(" Comenta algo que te haya gustado mucho de la lectura ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{readonly:"",outlined:""},model:{value:e.feedback.liked,callback:function(t){e.$set(e.feedback,"liked",t)},expression:"feedback.liked"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" Comenta algo que no te haya gustado de la lectura ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{readonly:"",outlined:""},model:{value:e.feedback.disliked,callback:function(t){e.$set(e.feedback,"disliked",t)},expression:"feedback.disliked"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" Mi personaje favorito fue (coméntanos por qué) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{readonly:"",outlined:""},model:{value:e.feedback.goodCharacter,callback:function(t){e.$set(e.feedback,"goodCharacter",t)},expression:"feedback.goodCharacter"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" El personaje que menos me gusto fue (coméntanos por qué) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",[r("v-textarea",{attrs:{readonly:"",outlined:""},model:{value:e.feedback.badCharacter,callback:function(t){e.$set(e.feedback,"badCharacter",t)},expression:"feedback.badCharacter"}})],1)],1),r("h2",{staticClass:"primary--text"},[e._v(" En general el libro, No me gustó (1) - Lo amé (10) ")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-radio-group",{attrs:{row:"",disabled:""},model:{value:e.feedback.grade,callback:function(t){e.$set(e.feedback,"grade",t)},expression:"feedback.grade"}},e._l(10,(function(e){return r("v-radio",{key:e,attrs:{label:String(e),value:e,color:"success"}})})),1)],1)],1)],1)],1)},ia=[],oa={data:function(){return{feedback:{},genresNames:[],genres:[],token:this.$cookies.get("token"),textTitle:""}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGenres();case 2:return t.next=4,e.getFeedback();case 4:case"end":return t.stop()}}),t)})))()},methods:{preferenceId:function(e){var t,r=Object(q["a"])(this.genres);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(e==a._id)return a.name}}catch(n){r.e(n)}finally{r.f()}},getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p("/user/genres",e.token);case 2:return r=t.sent,t.abrupt("return",e.genres=r);case 4:case"end":return t.stop()}}),t)})))()},getFeedback:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p("/admins/feedback/"+e.$route.params.id,e.token);case 2:r=t.sent,a=Object(q["a"])(r.selectedGenres);try{for(a.s();!(n=a.n()).done;)s=n.value,e.genresNames.push(e.preferenceId(s))}catch(c){a.e(c)}finally{a.f()}return t.next=7,p("/suggestions/feedback/"+r.suggestion,e.token);case 7:return i=t.sent,t.next=10,p("/texts/"+i.text,e.token);case 10:return o=t.sent,e.textTitle=o.title,t.abrupt("return",e.feedback=r);case 13:case"end":return t.stop()}}),t)})))()}}},ca=oa,la=Object(x["a"])(ca,sa,ia,!1,null,"02fbc962",null),ua=la.exports,da=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Puntos de Venta")]),r("div",{staticClass:"add-btn-container"},[e.hasPermission("pointOfSaleCreate")?r("v-btn",{attrs:{color:"primary"},on:{click:function(){return e.$router.push("/pointofsale/create")}}},[e._v("Agregar")]):e._e()],1),r("div",{staticClass:"table-wrapper"},[r("Table",{attrs:{items:e.poS,headers:e.headers},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[e.hasPermission("pointOfSaleRead")?r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){e.$router.push("pointofsale/view/"+a._id)}}},[e._v("Ver")]):e._e(),e.hasPermission("pointOfSaleEdit")?r("v-btn",{attrs:{small:"",color:"primary",disabled:!1,depressed:""},on:{click:function(){e.$router.push("pointofsale/edit/"+a._id)}}},[e._v("Editar")]):e._e(),e.hasPermission("pointOfSaleDelete")?r("v-btn",{attrs:{small:"",color:"error",disabled:!1,depressed:""},on:{click:function(){return e.deletePoS(a._id)}}},[e._v("Eliminar")]):e._e()],1)]}}])})],1)])},ma=[],pa={components:{Table:Be},mixins:[Xt],data:function(){return{hasPermission:tt,poS:[],headers:[{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Acciones",sortable:!1,actions:!0,align:"center"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),t.next=3,e.getPoS();case 3:e.updateLoading(!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{getPoS:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("pointOfSale/search",!1);case 3:e.poS=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deletePoS:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Nt("pointOfSale/".concat(e));case 3:return r.next=5,t.getPoS();case 5:Wt(Vt.CRUDOperationSuccess("eliminado")),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},va=pa,fa=(r("b498"),Object(x["a"])(va,da,ma,!1,null,"5b578e16",null)),ga=fa.exports,ha=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Punto de Venta")]),r("v-form",{ref:"form",staticClass:"main-container",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.pointOfSale.name,callback:function(t){e.$set(e.pointOfSale,"name",t)},expression:"pointOfSale.name"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Nombre"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-text-field",{attrs:{rules:[!0],disabled:e.viewMode},model:{value:e.pointOfSale.description,callback:function(t){e.$set(e.pointOfSale,"description",t)},expression:"pointOfSale.description"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Descripción")])],2),r("v-text-field",{attrs:{rules:[!0],disabled:e.viewMode},model:{value:e.pointOfSale.place,callback:function(t){e.$set(e.pointOfSale,"place",t)},expression:"pointOfSale.place"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Lugar")])],2),r("v-text-field",{attrs:{rules:[!0],disabled:e.viewMode},model:{value:e.pointOfSale.url,callback:function(t){e.$set(e.pointOfSale,"url",t)},expression:"pointOfSale.url"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("URL")])],2)],1),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:function(){e.$router.go(-1)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",disabled:e.loading||e.viewMode},on:{click:e.save}},[e._v("Guardar")])],1)],1)},ba=[],xa={props:{viewMode:{type:Boolean,required:!0}},mixins:[mr],components:{},data:function(){return{valid:!0,Messages:Vt,modalInViewMode:!1,id:"",pointOfSale:{name:"",place:"",url:"",description:""}}},mounted:function(){this.id=this.$route.params.id,this.dataInit()},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return e.updateLoading(!0),t.next=4,e.getById();case 4:e.updateLoading(!1);case 5:case"end":return t.stop()}}),t)})))()},getById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("pointOfSale/".concat(e.id),!1);case 3:e.pointOfSale=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return Wt(Vt.IncompleteForm()),t.abrupt("return");case 3:if(t.prev=3,e.updateLoading(!0),!e.id){t.next=11;break}return t.next=8,e.update();case 8:Wt(Vt.CRUDOperationSuccess("actualizado")),t.next=14;break;case 11:return t.next=13,e.create();case 13:Wt(Vt.CRUDOperationSuccess("creado"));case 14:e.$router.go(-1),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](3),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 22:e.updateLoading(!1);case 23:case"end":return t.stop()}}),t,null,[[3,17]])})))()},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Lt("PointOfSale",e.pointOfSale,!1);case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ft("pointOfSale/".concat(e.id),e.pointOfSale,!1);case 2:case"end":return t.stop()}}),t)})))()}}},wa=xa,ka=(r("c296"),Object(x["a"])(wa,ha,ba,!1,null,"94242ba2",null)),_a=ka.exports,Ra=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Inventarios")]),[r("v-card",[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},[r("reportsTable",{attrs:{items:e.dataInventories,headers:e.headers,loading:e.isLoading}})],1)])],1)],1)]],2)},ya=[],Sa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.formattedHeaders,items:e.items,loading:e.loading,options:e.pagination,"item-key":"_id"},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return e._l(t.items,(function(t){return r("tr",{key:t._id},[e._l(e.displayedHeaders,(function(a){return r("td",{key:a.value},["Fase"==a.text?r("div",[e._v(" "+e._s(9!==t.phase?e.faseOptions[t.phase].label:"Total")+" ")]):e._e(),"Acciones"==a.text?r("div",[t.go?r("div",{staticStyle:{margin:"2.5px 2.5px"}}):e._e()]):e._e(),"Fase"!=a.text?r("div",{staticClass:"text-truncate",style:{width:a.width}},[e._t("default",[e._v(e._s(t[a.value])+" ")])],2):e._e()])})),t.go?r("td",{staticClass:"text-xs-center"},[e._t("actions",[t.go?r("div",{staticStyle:{margin:"2.5px 2.5px"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",icon:""},on:{click:function(r){return e.goTo(t.go)}}},"v-btn",s,!1),n),[r("v-icon",[e._v("mdi-arrow-right")])],1)]}}],null,!0)},[r("span",[e._v("Ir a inventario")])])],1):e._e()])],2):e._e()],2)}))}}],null,!0)}),e.withPagination?r("div",{staticClass:"text-xs-center pt-2"},[r("v-options",{attrs:{length:e.pages,circle:""},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1):e._e()],1)])},ja=[],Ca={props:{headers:{type:Array},items:{type:Array},withPagination:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},admin:{type:Boolean,default:!1},isDashboard:{type:Boolean,default:!0},loading:{type:Boolean,default:!0}},data:function(){return{faseOptions:se,pagination:{rowsPerPage:300,totalItems:20}}},computed:{pages:function(){return null===this.pagination.rowsPerPage||null===this.totalItems?0:Math.ceil(this.totalItems/this.pagination.rowsPerPage)},totalItems:function(){return this.items.length},displayedHeaders:function(){return this.headers.filter((function(e){return!e.actions}))},formattedHeaders:function(){var e=this.expand?[{text:"",value:"expand",sortable:!1,align:"left",width:"10px"}]:[];return[].concat(e,Object(Le["a"])(this.headers))}},methods:{onChange:function(e){this.$emit("changePhase",e._id,e.phase)},seeTextDetails:function(e){this.$emit("textDetails",e)},goTo:function(e){this.$router.push(e)}}},Oa=Ca,Ea=Object(x["a"])(Oa,Sa,ja,!1,null,null,null),Da=Ea.exports,$a={components:{reportsTable:Da},mixins:[Xt],data:function(){return{hasPermission:tt,dataInventories:[],dataWriters:[],tab:null,filter:"",rejectedFilter:!1,isLoading:!1,genres:[],headers:[{text:"Escritor",value:"writer"},{text:"# de productos",value:"products"},{text:"Ver",sortable:!1,actions:!0}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getInventories();case 4:e.updateLoading(!1),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{changeFilter:function(e){this.filter=e},getInventories:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,qt("inventories",r);case 3:a=t.sent,a.forEach((function(e){console.log(e),e.go="/inventario/"+e.writer.user,e.writer=e.writer.pseudonym,e.products=e.items.length})),e.dataInventories=a;case 6:case"end":return t.stop()}}),t)})))()}}},Pa=$a,Ta=(r("dad5"),Object(x["a"])(Pa,Ra,ya,!1,null,"302369a6",null)),Aa=Ta.exports,Ma=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Ventas")]),r("div",{staticClass:"add-btn-container"},[e.hasPermission("saleCreate")?r("v-btn",{attrs:{color:"primary"},on:{click:function(){return e.$router.push("/sales/create")}}},[e._v("Agregar")]):e._e()],1),r("div",{staticClass:"table-wrapper"},[r("Table",{attrs:{items:e.sales,headers:e.headers},scopedSlots:e._u([{key:"item.event",fn:function(t){var r=t.item;return[e._v(" "+e._s(r.name)+" ")]}},{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[e.hasPermission("saleRead")?r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){e.$router.push("sales/view/"+a._id)}}},[e._v("Ver")]):e._e(),e.hasPermission("saleEdit")?r("v-btn",{attrs:{small:"",color:"primary",disabled:!1,depressed:""},on:{click:function(){e.$router.push("sales/edit/"+a._id)}}},[e._v("Editar")]):e._e(),e.hasPermission("saleDelete")?r("v-btn",{attrs:{small:"",color:"error",disabled:!1,depressed:""},on:{click:function(){return e.deleteSales(a._id)}}},[e._v("Eliminar")]):e._e()],1)]}}],null,!0)})],1)])},Ia=[],qa={components:{Table:Be},mixins:[Xt],data:function(){return{hasPermission:tt,sales:[],headers:[{text:"Evento",value:"event"},{text:"Total",value:"total"},{text:"Acciones",sortable:!1,actions:!0,align:"center"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),t.next=3,e.getSales();case 3:e.updateLoading(!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{getSales:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$cookies.get("token"),t.next=4,qt("sale/search",{},r);case 4:e.sales=t.sent,console.log(e.sales),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0),a=et(t.t0,Vt.SomethingWentWrong()),Wt(a);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteSales:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Nt("sale/".concat(e));case 3:return r.next=5,t.getSales();case 5:Wt(Vt.CRUDOperationSuccess("eliminado")),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},La=qa,Fa=(r("3464"),Object(x["a"])(La,Ma,Ia,!1,null,"1c2ffa7e",null)),Na=Fa.exports,Wa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Ventas")]),r("v-form",{ref:"form",staticClass:"main-container",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:e.events,"item-text":"name","item-value":"_id",label:"Evento",rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode,outlined:""},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}})],1),r("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"6"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.selectedDate,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.selectedDate=t},"update:return-value":function(t){e.selectedDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Fecha de la venta","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}},"v-text-field",n,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{locale:"es","no-title":"",scrollable:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.selectedDate)}}},[e._v(" OK ")])],1)],1)],1)],1),e._l(e.items,(function(t,a){return r("v-row",{key:a},[r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[r("v-autocomplete",{attrs:{items:e.products,"item-text":"name","item-value":"_id",label:"Producto",clearable:"",required:"",rules:[function(){return null!==t._id||"Este campo es requerido"}],disabled:e.viewMode,outlined:""},on:{input:function(r){return e.autocompleteProduct(a,t._id)}},model:{value:t._id,callback:function(r){e.$set(t,"_id",r)},expression:"item._id"}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[r("v-text-field",{attrs:{label:"Precio Unitario",prefix:"$",type:"number",rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode,required:"",outlined:""},on:{input:function(t){return e.calculateSubtotal(a)}},model:{value:t.price,callback:function(r){e.$set(t,"price",r)},expression:"item.price"}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"2"}},[r("v-text-field",{attrs:{label:"Cantidad",type:"number",rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode,min:"1",required:"",outlined:""},on:{input:function(t){return e.calculateSubtotal(a)}},model:{value:t.numberOfItems,callback:function(r){e.$set(t,"numberOfItems",r)},expression:"item.numberOfItems"}})],1),r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[r("v-text-field",{attrs:{label:"Subtotal",prefix:"$",type:"number",rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode,required:"",outlined:""},model:{value:t.subtotal,callback:function(r){e.$set(t,"subtotal",r)},expression:"item.subtotal"}})],1),r("v-col",{staticClass:"mx-auto",attrs:{cols:"12",md:"1"}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteItem(a)}}},[r("v-icon",[e._v("mdi-delete")])],1)],1)],1)})),r("v-row",[r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"1"}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.addItem}},[e._v("Agregar")])],1),r("v-spacer"),r("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{label:"Total",prefix:"$",type:"number",rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode,outlined:""},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}})],1)],1),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:function(){e.$router.go(-1)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",disabled:e.loading||e.viewMode||!e.valid},on:{click:e.save}},[e._v("Guardar ")])],1)],2)],1)},Ba=[],za=(r("13d5"),r("a434"),{props:{viewMode:{type:Boolean,required:!0}},mixins:[mr],components:{},data:function(){return{valid:!1,Messages:Vt,modalInViewMode:!1,selectedEvent:null,selectedDate:(new Date).toISOString().substr(0,10),menu:!1,id:"",total:0,sale:{},events:[],products:[],items:[{name:null,price:1,numberOfItems:1,subtotal:1}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,e.dataInit(),t.next=4,e.getEvents();case 4:return t.next=6,e.getProducts();case 6:case"end":return t.stop()}}),t)})))()},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return e.updateLoading(!0),t.next=4,e.getById();case 4:e.updateLoading(!1);case 5:case"end":return t.stop()}}),t)})))()},getById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("sale/".concat(e.id),!1);case 3:e.sale=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getEvents:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("event/search",!1);case 3:e.events=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getProducts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$cookies.get("token"),t.next=4,qt("products",{},r);case 4:e.products=t.sent,t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0),a=et(t.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return Wt(Vt.IncompleteForm()),t.abrupt("return");case 3:if(t.prev=3,e.updateLoading(!0),!e.id){t.next=11;break}return t.next=8,e.update();case 8:Wt(Vt.CRUDOperationSuccess("actualizado")),t.next=14;break;case 11:return t.next=13,e.create();case 13:Wt(Vt.CRUDOperationSuccess("creado"));case 14:e.$router.go(-1),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](3),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 22:e.updateLoading(!1);case 23:case"end":return t.stop()}}),t,null,[[3,17]])})))()},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.sale={createdBy:e.$cookies.get("user_id"),event:e.selectedEvent,items:e.items,total:e.total,date:e.selectedDate},t.next=3,Lt("sale",e.sale,!1);case 3:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ft("sale/".concat(e.id),e.sale,!1);case 2:case"end":return t.stop()}}),t)})))()},addItem:function(){this.items.push({name:null,price:1,numberOfItems:1})},deleteItem:function(e){this.items.length>1&&this.items.splice(e,1)},calculateTotal:function(){this.total=this.items.map((function(e){return e.subtotal})).reduce((function(e,t){return e+t}))},calculateSubtotal:function(e){this.items[e].subtotal=this.items[e].price*this.items[e].numberOfItems,this.calculateTotal()},autocompleteProduct:function(e,t){this.product=this.products[this.products.findIndex((function(e){return e._id===t}))],this.items[e].productId=this.product._id,this.items[e].name=this.product.name,this.items[e].price=this.product.price,this.items[e].stock=this.product.stock,this.calculateSubtotal(e)}}}),Ga=za,Ua=(r("dc88"),Object(x["a"])(Ga,Wa,Ba,!1,null,"755abe96",null)),Va=Ua.exports,Ha=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Evento")]),r("v-form",{ref:"form",staticClass:"main-container",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.event.name,callback:function(t){e.$set(e.event,"name",t)},expression:"event.name"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Nombre"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-text-field",{attrs:{rules:[!0],disabled:e.viewMode},model:{value:e.event.description,callback:function(t){e.$set(e.event,"description",t)},expression:"event.description"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Descripción")])],2),r("v-text-field",{attrs:{rules:[function(t){return!!t||e.Messages.RequiredField()}],disabled:e.viewMode},model:{value:e.event.place,callback:function(t){e.$set(e.event,"place",t)},expression:"event.place"}},[e._v(" >"),r("template",{slot:"prepend"},[e._v("Lugar"),r("span",{staticStyle:{color:"red"}},[e._v("*")])])],2),r("v-layout",{attrs:{"justify-space-between":"",wrap:""}},[r("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm6:""}},[r("v-date-picker",{attrs:{locale:"es",landscape:"",disabled:e.viewMode},model:{value:e.event.date,callback:function(t){e.$set(e.event,"date",t)},expression:"event.date"}})],1),r("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm6:""}},[r("v-time-picker",{attrs:{format:"24hr",landscape:"",disabled:e.viewMode},model:{value:e.event.time,callback:function(t){e.$set(e.event,"time",t)},expression:"event.time"}})],1)],1)],1),r("div",{staticClass:"bottom-buttons-wrapper"},[r("v-btn",{attrs:{color:"secondary",disabled:!1},on:{click:function(){e.$router.go(-1)}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",disabled:e.loading||e.viewMode},on:{click:e.save}},[e._v("Guardar")])],1)],1)},Ya=[],Ka={props:{viewMode:{type:Boolean,required:!0}},mixins:[mr],components:{},data:function(){return{valid:!0,Messages:Vt,modalInViewMode:!1,id:"",event:{name:"",place:"",description:"",date:"",time:""},datePicker:"",timePicker:""}},mounted:function(){this.id=this.$route.params.id,this.dataInit()},methods:{dataInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return e.updateLoading(!0),t.next=4,e.getById();case 4:e.updateLoading(!1);case 5:case"end":return t.stop()}}),t)})))()},getById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("event/".concat(e.id),!1);case 3:e.event=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return Wt(Vt.IncompleteForm()),t.abrupt("return");case 3:if(t.prev=3,e.updateLoading(!0),!e.id){t.next=11;break}return t.next=8,e.update();case 8:Wt(Vt.CRUDOperationSuccess("actualizado")),t.next=14;break;case 11:return t.next=13,e.create();case 13:Wt(Vt.CRUDOperationSuccess("creado"));case 14:e.$router.go(-1),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](3),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 22:e.updateLoading(!1);case 23:case"end":return t.stop()}}),t,null,[[3,17]])})))()},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Lt("event",e.event,!1);case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ft("event/".concat(e.id),e.event,!1);case 2:case"end":return t.stop()}}),t)})))()}}},Za=Ka,Ja=(r("d10b"),Object(x["a"])(Za,Ha,Ya,!1,null,"71c1a69b",null)),Qa=Ja.exports,Xa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Eventos")]),r("div",{staticClass:"add-btn-container"},[e.hasPermission("eventCreate")?r("v-btn",{attrs:{color:"primary"},on:{click:function(){return e.$router.push("/event/create")}}},[e._v("Agregar")]):e._e()],1),r("div",{staticClass:"table-wrapper"},[r("Table",{attrs:{items:e.events,headers:e.headers},scopedSlots:e._u([{key:"actions",fn:function(t){var a=t.props;return[r("div",{staticClass:"actions-wrapper"},[e.hasPermission("eventRead")?r("v-btn",{attrs:{small:"",color:"success",disabled:!1,depressed:""},on:{click:function(){e.$router.push("event/view/"+a._id)}}},[e._v("Ver")]):e._e(),e.hasPermission("eventEdit")?r("v-btn",{attrs:{small:"",color:"primary",disabled:!1,depressed:""},on:{click:function(){e.$router.push("event/edit/"+a._id)}}},[e._v("Editar")]):e._e(),e.hasPermission("eventDelete")?r("v-btn",{attrs:{small:"",color:"error",disabled:!1,depressed:""},on:{click:function(){return e.deleteEvent(a._id)}}},[e._v("Eliminar")]):e._e()],1)]}}])})],1)])},en=[],tn={components:{Table:Be},mixins:[Xt],data:function(){return{hasPermission:tt,events:[],headers:[{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Fecha",value:"date"},{text:"Hora",value:"time"},{text:"Acciones",sortable:!1,actions:!0,align:"center"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),t.next=3,e.getEvents();case 3:e.updateLoading(!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{getEvents:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("event/search",!1);case 3:e.events=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteEvent:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Nt("event/".concat(e));case 3:return r.next=5,t.getEvents();case 5:Wt(Vt.CRUDOperationSuccess("eliminado")),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),a=et(r.t0,Vt.SomethingWentWrong()),Wt(a);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},rn=tn,an=(r("bb74"),Object(x["a"])(rn,Xa,en,!1,null,"0bd439e6",null)),nn=an.exports,sn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Reportes")]),[r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab,on:{change:function(r){return e.changeFilter(t.filter)}}},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},["Autor"!=t.tab&&"Fase"!=t.tab&&"Reporte Por Edades"!=t.tab?r("div",[r("reportsTable",{attrs:{items:e.dataTexts,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Fase"==t.tab?r("div",[r("v-select",{attrs:{items:e.dataPhases,"item-text":"label","item-value":"value",label:"Selecciona la fase"},on:{input:function(t){return e.changeFilter("phase")}},model:{value:e.selectedPhase,callback:function(t){e.selectedPhase=t},expression:"selectedPhase"}})],1):e._e(),"Autor"==t.tab?r("div",[r("v-select",{attrs:{items:e.dataWriters,"item-text":"name","item-value":"pseudonym",label:"Selecciona un Autor"},on:{input:function(t){return e.changeFilter("writer")}},model:{value:e.selectedWriter,callback:function(t){e.selectedWriter=t},expression:"selectedWriter"}})],1):e._e(),"Autor"==t.tab||"Fase"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredDataTexts,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Reporte Por Edades"==t.tab?r("div",[r("v-select",{attrs:{items:e.dataAuthorOrReader,"item-text":"text","item-value":"value",label:"Selecciona Reporte de Edad por Autor o Lector"},on:{input:function(t){return e.changeFilter(e.selectedAutorOrReader)}},model:{value:e.selectedAutorOrReader,callback:function(t){e.selectedAutorOrReader=t},expression:"selectedAutorOrReader"}})],1):e._e(),"Reporte Por Edades"==t.tab&&null!=e.selectedAutorOrReader?r("div",[r("reportsTable",{attrs:{items:e.ageDataText,headers:e.headersForAge,loading:e.isLoading}})],1):e._e()])])],1)],1)})),1)],1)]],2)},on=[],cn={components:{reportsTable:Da},mixins:[Xt],data:function(){var e=this;return{hasPermission:tt,dataTexts:[],dataWriters:[],dataPhases:se,tab:null,filter:"",rejectedFilter:!1,isLoading:!1,selectedWriter:null,selectedAutorOrReader:null,selectedPhase:null,filteredDataTexts:null,ageDataText:null,token:this.$cookies.get("token"),items:[{tab:"Registrados",filter:""},{tab:"Rechazados",filter:"rejected"},{tab:"Fase",filter:"phase"},{tab:"Autor",filter:"writer"},{tab:"Reporte Por Edades",filter:""}],genres:[],headers:[{text:"Título",value:"title"},{text:"Autor",value:"writer",filter:function(t){return"writer"===e.filter||t}},{text:"Generos",value:"genres"},{text:"Páginas",value:"numberOfPages"},{text:"Capitulos",value:"numberOfChapters"},{text:"Fase",value:"phase",filter:function(t){return"phase"===e.filter||t}},{text:"Rango de Edades",value:"ageRange"},{text:"Rechazado",value:"isRejected",filter:function(t){return"rejected"!==e.filter||t}},{text:"Acciones",sortable:!1,actions:!0}],headersForWriter:[{text:"Nombre",value:"name"},{text:"Seudónimo",value:"pseudonym"},{text:"Email",value:"email"},{text:"Teléfono",value:"phone"},{text:"Año de nacimiento",value:"birthdate"},{text:"Nacionalidad",value:"nationality"},{text:"Suscripción",value:"isPlus"}],headersForAge:[{text:"Nombre",value:"name"},{text:"Email",value:"email"},{text:"Edad",value:"birthdate"},{text:"Nacionalidad",value:"nationality"}],dataAuthorOrReader:[{text:"Autor",value:"author"},{text:"Lector",value:"reader"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getTexts();case 4:return t.next=6,e.getGenres();case 6:return t.next=8,e.composeAllWriters();case 8:e.updateLoading(!1),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},methods:{changeFilter:function(e){var t=this;console.log(e),"writer"===e?this.filteredDataTexts=this.dataTexts.filter((function(e){return e.writer===t.selectedWriter})):"author"===e?(this.calculateBirthDate(),this.ageDataText=this.dataWriters,console.log(this.dataWriters)):"phase"==e&&(console.log(this.dataTexts),this.filteredDataTexts=this.dataTexts.filter((function(e){return e.phase===t.selectedPhase}))),this.filter=e},calculateBirthDate:function(){this.dataWriters.forEach((function(e){e.birthdate=Math.floor((new Date-new Date(e.birthdate))/1e3/60/60/24/365.25)}))},getTexts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.token=e.$cookies.get("token"),t.next=3,qt("texts/",e.token);case 3:r=t.sent,r.forEach((function(e){var t="";e.genres.forEach((function(e){t=""==t?e.name:t+", "+e.name})),e.genres=t,e.writer=e.writer.pseudonym})),e.dataTexts=r;case 6:case"end":return t.stop()}}),t)})))()},getGenres:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.genres=[]}catch(a){console.error(a),r=et(a,Vt.SomethingWentWrong()),Wt(r)}case 1:case"end":return t.stop()}}),t)})))()},composeAllWriters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.token=e.$cookies.get("token"),t.next=3,qt("writers",e.token);case 3:r=t.sent,s=[],a=0;case 6:if(!(a<r.length)){t.next=14;break}return t.next=9,qt("users/"+r[a].user._id,e.token);case 9:n=t.sent,s.push({name:n.name,email:n.email,phone:n.phone,birthdate:n.birthdate,nationality:n.nationality,pseudonym:r[a].pseudonym,isPlus:r[a].isPlus});case 11:a++,t.next=6;break;case 14:e.dataWriters=s;case 15:case"end":return t.stop()}}),t)})))()}}},ln=cn,un=(r("9efd"),Object(x["a"])(ln,sn,on,!1,null,"3abb6fd8",null)),dn=un.exports,mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Reportes")]),[r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab,on:{change:function(r){return e.changeFilter(t.filter)}}},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},["Autor"!=t.tab?r("div",[r("reportsTable",{attrs:{items:e.dataTexts,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Autor"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.dataWriters,headers:e.headersForWriter,loading:e.isLoading}})],1):e._e()])])],1)],1)})),1)],1)]],2)},pn=[],vn={components:{reportsTable:Da},mixins:[Xt],data:function(){var e=this;return{writer:this.$cookies.get("user_id"),role:this.$cookies.get("user_type"),hasPermission:tt,dataTexts:[],data:[],dataWriters:[],tab:null,filter:"",rejectedFilter:!1,isLoading:!1,items:[{tab:"Registrados",filter:""},{tab:"Rechazados",filter:"rejected"}],genres:[],headers:[{text:"Título",value:"title"},{text:"Autor",value:"writer"},{text:"Generos",value:"genres"},{text:"Páginas",value:"numberOfPages"},{text:"Capitulos",value:"numberOfChapters"},{text:"Fase",value:"phase"},{text:"Rango de Edades",value:"ageRange"},{text:"Rechazado",value:"isRejected",filter:function(t){return"rejected"!==e.filter||t}},{text:"Acciones",sortable:!1,actions:!0}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getTexts();case 4:e.updateLoading(!1),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{changeFilter:function(e){this.filter=e},getTexts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,p("texts/writer/".concat(e.writer),r);case 3:e.data=t.sent,e.rejectedTexts=e.data.filter((function(e){return e.isRejected})),e.data.forEach((function(e){var t="";e.genres.forEach((function(e){t=""==t?e.name:t+", "+e.name})),e.genres=t,e.writer=e.writer.pseudonym})),e.dataTexts=e.data;case 7:case"end":return t.stop()}}),t)})))()}}},fn=vn,gn=(r("0198"),Object(x["a"])(fn,mn,pn,!1,null,"27b2efe7",null)),hn=gn.exports,bn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Reportes")]),[r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab,on:{change:function(r){return e.changeFilter(t.filter)}}},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},[r("reportsTable",{attrs:{items:e.dataTexts,headers:e.headers,loading:e.isLoading}})],1)])],1)],1)})),1)],1)]],2)},xn=[],wn={components:{reportsTable:Da},mixins:[Xt],data:function(){var e=this;return{reader:this.$cookies.get("user_id"),hasPermission:tt,dataTexts:[],data:[],tab:null,filter:"",token:[],isLoading:!1,items:[{tab:"Sugerencias de Libros",filter:""},{tab:"Leídos",filter:"completed"}],genres:[],headers:[{text:"Título",value:"title"},{text:"Autor",value:"writer"},{text:"Generos",value:"genres"},{text:"Páginas",value:"numberOfPages"},{text:"Capitulos",value:"numberOfChapters"},{text:"Fase",value:"phase"},{text:"Rango de Edades",value:"ageRange"},{text:"Rechazado",value:"isRejected"},{text:"Estatus de la Sugerencia",value:"suggestionStatus"},{text:"Leído",value:"readBook",filter:function(t){return"completed"!==e.filter||t}}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getTexts();case 4:e.updateLoading(!1),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{changeFilter:function(e){this.filter=e},getTexts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.token=e.$cookies.get("token"),t.next=3,p("/suggestions/getAllSuggestionsDashboard/"+e.reader,e.token);case 3:e.data=t.sent,e.data.forEach((function(t){var r="";t.text.genres.forEach((function(e){r=""==r?e.name:r+", "+e.name})),t.text.genres=r,t.text.writer=t.text.writer.pseudonym;var a=!1;"Completed"==t.suggestionStatus&&(a=!0),e.dataTexts.push({title:t.text.title,writer:t.text.writer,genres:t.text.genres,numberOfPages:t.text.numberOfPages,numberOfChapters:t.text.numberOfChapters,phase:t.text.phase,ageRange:t.text.ageRange,isRejected:t.text.isRejected,readBook:a,suggestionStatus:t.suggestionStatus})}));case 5:case"end":return t.stop()}}),t)})))()}}},kn=wn,_n=(r("2a2f"),Object(x["a"])(kn,bn,xn,!1,null,"3a074fea",null)),Rn=_n.exports,yn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Reportes de Ventas")]),[r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab,on:{change:function(r){return e.changeFilter(t.filter)}}},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},["Ventas por Libro"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesBooks,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Ventas por Mercancía"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesMerch,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Ventas por Autor"==t.tab?r("div",[r("v-select",{attrs:{items:e.dataWriters,"item-text":"name","item-value":"_id",label:"Selecciona un Autor"},on:{input:function(t){return e.changeFilter("writer")}},model:{value:e.selectedWriter,callback:function(t){e.selectedWriter=t},expression:"selectedWriter"}}),r("reportsTable",{attrs:{items:e.filteredSalesAutor,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Ventas por Evento"==t.tab?r("div",[r("v-select",{attrs:{items:e.dataEvents,"item-text":"name","item-value":"name",clearable:"",label:"Selecciona un Evento"},on:{input:function(t){return e.changeFilter("event")}},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}}),"Ventas por Evento"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesEvent,headers:e.headersSalesEvent,loading:e.isLoading}})],1):e._e()],1):e._e(),"Ventas por Fecha"==t.tab?r("div",[r("v-menu",{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,"return-value":e.selectedDate,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.selectedDate=t},"update:return-value":function(t){e.selectedDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Selecciona una fecha","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}},"v-text-field",n,!1),a))]}}],null,!0),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{locale:"es","no-title":"",scrollable:""},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.save(e.selectedDate)}}},[e._v(" OK ")])],1)],1),"Ventas por Fecha"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesDate,headers:e.headersSalesEvent,loading:e.isLoading}})],1):e._e()],1):e._e()])])],1)],1)})),1)],1)]],2)},Sn=[],jn={components:{reportsTable:Da},mixins:[Xt],data:function(){var e=this;return{hasPermission:tt,products:[],dataWriters:[],dataEvents:[],writers:[],selectedWriter:null,selectedEvent:null,selectedDate:(new Date).toISOString().substr(0,10),menu:!1,tab:null,filter:"",isLoading:!1,items:[{tab:"Ventas por Libro",filter:"Book"},{tab:"Ventas por Mercancía",filter:"Merch"},{tab:"Ventas por Autor",filter:"writer"},{tab:"Ventas por Evento",filter:"event"},{tab:"Ventas por Fecha",filter:"date"}],salesBooks:[],filteredSalesAutor:[],filteredSalesBooks:[],filteredSalesMerch:[],filteredSalesEvent:[],filteredSalesDate:[],headers:[{text:"Título",value:"title"},{text:"Autor",value:"writer",filter:function(t){return"writer"===e.filter||t}},{text:"Cantidad",value:"quantity"},{text:"Total",value:"total"},{text:"Categoria",value:"category"}],headersSalesEvent:[{text:"Evento",value:"event"},{text:"Cantidad",value:"quantity"},{text:"Total",value:"total"},{text:"Fecha",value:"date"}],sales:[],token:this.$cookies.get("token"),aux1:[],aux2:[],aux3:[],aux4:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getSales();case 4:return t.next=6,e.getProducts();case 6:return t.next=8,e.getEvents();case 8:return t.next=10,e.getSalesProducts();case 10:return t.next=12,e.composeAllWriters();case 12:e.updateLoading(!1),e.isLoading=!1;case 14:case"end":return t.stop()}}),t)})))()},methods:{save:function(e){this.$refs.menu[0].save(e),this.changeFilter("date")},changeFilter:function(e){var t=this;this.aux1=this.selectedWriter,"writer"===e?(this.filteredSalesAutor=this.salesBooks.filter((function(e){return e.writerObject._id===t.selectedWriter})),this.aux2=this.salesBooks[0].writerObject,this.aux3=this.selectedWriter):"event"===e?this.selectedEvent?this.filteredSalesEvent=this.sales.filter((function(e){return e.event===t.selectedEvent})):this.filteredSalesEvent=this.sales:"date"===e&&(this.selectedDate?(this.filteredSalesDate=this.sales.filter((function(e){return e.date===t.selectedDate})),console.log("hola")):this.filteredSalesDate=this.sales),this.filter=e},getSales:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("sale/search",{},e.role);case 3:e.sales=t.sent,e.sales.forEach((function(e){null!=e.event?e.event=e.event.name:e.event="N/A",e.quantity=0,e.items.forEach((function(t){e.quantity+=t.numberOfItems}))})),t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getProducts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("products",{},e.token);case 3:e.products=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getEvents:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt("event/search",!1);case 3:e.dataEvents=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getSalesProducts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r={title:"",writer:"",writerObject:{},quantity:0,total:0,category:""},e.products.forEach((function(t){r.title=t.name,r.writer=t.inventory.writer.pseudonym,r.writerObject=t.inventory.writer,r.quantity=0,r.total=0,r.category=t.category,e.sales.forEach((function(e){e.items.forEach((function(e){e.productId._id==t._id&&(r.quantity=r.quantity+e.numberOfItems,r.total=r.total+e.subtotal)}))})),e.salesBooks.push({title:r.title,writer:r.writer,writerObject:r.writerObject,quantity:r.quantity,total:r.total,category:r.category})}))}catch(n){console.error(n),a=et(n,Vt.SomethingWentWrong()),Wt(a)}e.filteredSalesMerch=e.salesBooks.filter((function(e){return"Merchandise"===e.category})),e.filteredSalesBooks=e.salesBooks.filter((function(e){return"Book"===e.category}));case 3:case"end":return t.stop()}}),t)})))()},composeAllWriters:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt("writers",e.token);case 2:e.writers=t.sent,n=[],r=0;case 5:if(!(r<e.writers.length)){t.next=13;break}return t.next=8,qt("users/"+e.writers[r].user._id,e.token);case 8:a=t.sent,n.push({name:a.name,email:a.email,phone:a.phone,birthdate:a.birthdate,nationality:a.nationality,pseudonym:e.writers[r].pseudonym,isPlus:e.writers[r].isPlu,_id:e.writers[r]._id});case 10:r++,t.next=5;break;case 13:e.dataWriters=n;case 14:case"end":return t.stop()}}),t)})))()}}},Cn=jn,On=(r("327b"),Object(x["a"])(Cn,yn,Sn,!1,null,"4743edfc",null)),En=On.exports,Dn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Tiempos")]),[r("v-select",{staticStyle:{"max-width":"35%"},attrs:{items:e.writers,"item-text":"label","item-value":"label"},on:{change:e.onChange},model:{value:e.defaultWriter,callback:function(t){e.defaultWriter=t},expression:"defaultWriter"}}),r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",["Tabla"==t.tab?r("div",{staticClass:"table-wrapper"},[r("reportsTable",{attrs:{items:e.dataTimesTable,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Grafica"==t.tab?r("div",{staticClass:"table-wrapper",staticStyle:{display:"flex","flex-direction":"row"}},e._l(e.headersGraph,(function(t){return r("div",{key:t.text,staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[r("h3",[e._v(e._s(t.text))]),r("PieChart",{attrs:{"chart-data":e.dataTimesGraph[t.value]}})],1)})),0):e._e()])],1)],1)})),1)],1)]],2)},$n=[],Pn=(r("a9e3"),r("b680"),r("b64b"),r("07ac"),r("1fca")),Tn=Pn["b"].reactiveProp,An={extends:Pn["a"],mixins:[Tn],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},Mn={components:{reportsTable:Da,PieChart:An},mixins:[Xt],data:function(){return{hasPermission:tt,dataTimesTable:[],tab:null,filter:"",rejectedFilter:!1,isLoading:!1,defaultWriter:{label:"General"},writers:[{label:"General"}],writersData:{},items:[{tab:"Tabla"},{tab:"Grafica"}],headers:[{text:"Fase",value:"phase"},{text:"Minimo",value:"min"},{text:"Promedio",value:"avg"},{text:"Maximo",value:"max"},{text:"Total",value:"total"}],headersGraph:[{text:"Minimo",value:"min"},{text:"Promedio",value:"avg"},{text:"Maximo",value:"max"},{text:"Total",value:"total"}],dataTimesGraph:{min:{labels:ie,datasets:[{label:"min",data:[],backgroundColor:oe}]},max:{labels:ie,datasets:[{label:"max",data:[],backgroundColor:oe}]},avg:{labels:ie,datasets:[{label:"avg",data:[],backgroundColor:oe}]},total:{labels:ie,datasets:[{label:"total",data:[],backgroundColor:oe}]}}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getTimes();case 4:e.updateLoading(!1),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{getTimes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$cookies.get("token"),t.next=3,qt("timeBenchmarks",r);case 3:return a=t.sent,n=Object.values(a).map((function(t,r){var a=e.parseBenchmarksRead(t);return Object(l["a"])({},a,{phase:r})})),e.dataTimesTable=n,e.parseDataGraph(a),e.writersData={General:a},t.next=10,qt("timeBenchmarksByWriter",r);case 10:s=t.sent,Object.keys(s).forEach((function(t,r){e.writers.push({label:t})})),e.writersData=Object(l["a"])({},e.writersData,{},s),console.log(e.writersData);case 14:case"end":return t.stop()}}),t)})))()},onChange:function(e){var t=this;console.log(e);var r=this.writersData[e];console.log(r);var a=Object.values(r).map((function(e,r){var a=t.parseBenchmarksRead(e);return Object(l["a"])({},a,{phase:r})}));this.dataTimesTable=a,this.parseDataGraph(r)},parseBenchmarksRead:function(e){var t={};return t.avg=null==e.avg?"N/A":e.avg.toFixed(2)+"h",t.max=e.max==Number.MIN_VALUE?"N/A":e.max.toFixed(2)+"h",t.min=e.min==Number.MAX_VALUE?"N/A":e.min.toFixed(2)+"h",t.total=0==e.total?"N/A":e.total.toFixed(2)+"h",t},parseDataGraph:function(e){var t=this;Object.assign(this.dataTimesGraph,In()),console.log(this.dataTimesGraph),Object.values(e).forEach((function(e,r){var a=t.parseBenchmarksGraph(e);r<9&&Object.keys(e).forEach((function(e,r){t.dataTimesGraph[e].datasets[0].data.push(a[e])}))}))},parseBenchmarksGraph:function(e){var t={};return t.avg=null==e.avg?0:e.avg.toFixed(2),t.max=e.max==Number.MIN_VALUE?0:e.max.toFixed(2),t.min=e.min==Number.MAX_VALUE?0:e.min.toFixed(2),t.total=0==e.total?0:e.total.toFixed(2),t}}};function In(){return{min:{labels:ie,datasets:[{label:"min",data:[],backgroundColor:oe}]},max:{labels:ie,datasets:[{label:"max",data:[],backgroundColor:oe}]},avg:{labels:ie,datasets:[{label:"avg",data:[],backgroundColor:oe}]},total:{labels:ie,datasets:[{label:"total",data:[],backgroundColor:oe}]}}}var qn=Mn,Ln=(r("b4e5"),Object(x["a"])(qn,Dn,$n,!1,null,"c9fd359c",null)),Fn=Ln.exports,Nn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Reportes de Ventas")]),[r("v-card",[r("v-tabs",{attrs:{"background-color":"primary",dark:"",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab",{key:t.tab,on:{change:function(r){return e.changeFilter(t.filter)}}},[e._v(" "+e._s(t.tab)+" ")])})),1),r("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return r("v-tab-item",{key:t.tab},[r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("div",{staticClass:"table-wrapper"},["Ventas por Libro"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesBooks,headers:e.headers,loading:e.isLoading}})],1):e._e(),"Ventas por Mercancía"==t.tab?r("div",[r("reportsTable",{attrs:{items:e.filteredSalesMerch,headers:e.headers,loading:e.isLoading}})],1):e._e()])])],1)],1)})),1)],1)]],2)},Wn=[],Bn={components:{reportsTable:Da},mixins:[Xt],data:function(){return{writerId:this.$cookies.get("user_id"),hasPermission:tt,tab:null,filter:"",isLoading:!1,items:[{tab:"Ventas por Libro",filter:"Book"},{tab:"Ventas por Mercancía",filter:"Merch"}],filteredSalesBooks:[],filteredSalesMerch:[],headers:[{text:"Título",value:"title"},{text:"Autor",value:"writer"},{text:"Cantidad",value:"quantity"},{text:"Total",value:"total"},{text:"Categoria",value:"category"}],sales:[],token:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateLoading(!0),e.isLoading=!0,t.next=4,e.getSalesByWriter();case 4:return t.next=6,e.getSalesProducts();case 6:e.updateLoading(!1),e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},methods:{getSalesByWriter:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.token=e.$cookies.get("token"),t.next=4,qt("saleByWriter/"+e.writerId,{},e.role);case 4:e.sales=t.sent,console.log(e.sales),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0),r=et(t.t0,Vt.SomethingWentWrong()),Wt(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getSalesProducts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.filteredSalesMerch=e.sales.filter((function(e){return"Merchandise"===e.category})),r=0;r<e.filteredSalesMerch.length;r++)e.filteredSalesMerch[r].writer=e.filteredSalesMerch[r].writer.pseudonym;for(e.filteredSalesBooks=e.sales.filter((function(e){return"Book"===e.category})),a=0;a<e.filteredSalesBooks.length;a++)e.filteredSalesBooks[a].writer=e.filteredSalesBooks[a].writer.pseudonym;case 4:case"end":return t.stop()}}),t)})))()}}},zn=Bn,Gn=(r("b560"),Object(x["a"])(zn,Nn,Wn,!1,null,"a03e9b06",null)),Un=Gn.exports;a["default"].use(A["a"]);var Vn=[{path:"/Registro_Lector",name:"RegisterReader",component:xe},{path:"/Registro_Escritor",name:"RegisterWriter",component:Se},{path:"/Iniciar_Sesion",name:"LogIn",component:$e},{path:"/Agregar_Escrito",name:"TextRegister",component:_r,meta:{requiresAuth:!0,withAccess:["writer"]}},{path:"/Agregar_Escrito/:id",name:"TextRegisterByID",component:_r},{path:"/Usuarios",name:"Users",component:Tt,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/RoleSet/:id",name:"RoleSet",component:Zt,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/",name:"Dashboard",component:ft,meta:{requiresAuth:!0,withAccess:["admin","reader","writer"]}},{path:"/Cuestionario_de_lectura/:id",name:"Questionnarie",component:Or,meta:{requiresAuth:!0,withAccess:["reader"]}},{path:"/Sugerencias_Texto/:id",name:"SuggestionsAdmin",component:Ar,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/Mis_Lecturas/:id",name:"ChaptersVisualization",component:Nr,meta:{requiresAuth:!0,withAccess:["reader"]}},{path:"/Retroalimentacion/:id",name:"Feedback",component:ua,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/roleList",name:"RoleList",component:Vr,meta:{requiresAuth:!0,withAccess:["admin"],permission:"roleRead"}},{path:"/roleFormCreate",name:"RoleFormCreate",component:na,meta:{requiresAuth:!0,withAccess:["admin"],permission:"roleCreate"},props:{viewMode:!1}},{path:"/roleFormView/:id",name:"RoleFormView",component:na,meta:{requiresAuth:!0,withAccess:["admin"],permission:"roleRead"},props:{viewMode:!0}},{path:"/roleForm/:id",name:"RoleFormEdit",component:na,meta:{requiresAuth:!0,withAccess:["admin"],permission:"roleEdit"},props:{viewMode:!1}},{path:"/genres",name:"GenreList",component:ar,meta:{requiresAuth:!0,withAccess:["admin"],permission:"genreRead"}},{path:"/genre/create",name:"GenreFormCreate",component:gr,meta:{requiresAuth:!0,withAccess:["admin"],permission:"genreCreate"},props:{viewMode:!1}},{path:"/genre/view/:id",name:"GenreFormView",component:gr,meta:{requiresAuth:!0,withAccess:["admin"],permission:"genreRead"},props:{viewMode:!0}},{path:"/genre/edit/:id",name:"GenreFormEdit",component:gr,meta:{requiresAuth:!0,withAccess:["admin"],permission:"genreEdit"},props:{viewMode:!1}},{path:"/pointOfSale",name:"PointOfSale",component:ga,meta:{requiresAuth:!0,withAccess:["admin"],permission:"pointOfSaleRead"}},{path:"/pointofsale/create",name:"PointOfSaleCreate",component:_a,meta:{requiresAuth:!0,withAccess:["admin"],permission:"pointOfSaleCreate"},props:{viewMode:!1}},{path:"/pointofsale/view/:id",name:"PointOfsaleFormView",component:_a,meta:{requiresAuth:!0,withAccess:["admin"],permission:"pointOfSaleRead"},props:{viewMode:!0}},{path:"/pointofsale/edit/:id",name:"PointOfsaleFormEdit",component:_a,meta:{requiresAuth:!0,withAccess:["admin"],permission:"pointOfSaleEdit"},props:{viewMode:!1}},{path:"/event",name:"Event",component:nn,meta:{requiresAuth:!0,withAccess:["admin"],permission:"eventRead"}},{path:"/event/create",name:"EventCreate",component:Qa,meta:{requiresAuth:!0,withAccess:["admin"],permission:"eventCreate"},props:{viewMode:!1}},{path:"/event/view/:id",name:"EventrmView",component:Qa,meta:{requiresAuth:!0,withAccess:["admin"],permission:"eventRead"},props:{viewMode:!0}},{path:"/event/edit/:id",name:"EventFormEdit",component:Qa,meta:{requiresAuth:!0,withAccess:["admin"],permission:"eventEdit"},props:{viewMode:!1}},{path:"/inventario/:id",name:"Inventario",component:kt,meta:{requiresAuth:!0,withAccess:["writer","admin"]}},{path:"/inventarios",name:"Inventarios",component:Aa,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/tiempos",name:"Tiempos",component:Fn,meta:{requiresAuth:!0,withAccess:["admin"]}},{path:"/reports",name:"Reports",component:dn,meta:{requiresAuth:!0,withAccess:["admin"],permission:"reportsRead"},props:{viewMode:!0}},{path:"/salesReports",name:"SalesReports",component:En,meta:{requiresAuth:!0,withAccess:["admin"],permission:"saleRead"}},{path:"/myBooks",name:"MyBooks",component:hn,meta:{requiresAuth:!0,withAccess:["writer"]}},{path:"/mySales",name:"MySales",component:Un,meta:{requiresAuth:!0,withAccess:["writer"]}},{path:"/readBooks",name:"ReadBooks",component:Rn,meta:{requiresAuth:!0,withAccess:["reader"]}},{path:"/sales",name:"Sales",component:Na,meta:{requiresAuth:!0,withAccess:["admin"],permission:"saleRead"}},{path:"/sales/create",name:"SalesCreate",component:Va,meta:{requiresAuth:!0,withAccess:["admin"],permission:"saleCreate"},props:{viewMode:!1}},{path:"/sales/view/:id",name:"salesFormView",component:Va,meta:{requiresAuth:!0,withAccess:["admin"],permission:"saleRead"},props:{viewMode:!0}},{path:"/sales/edit/:id",name:"salesFormEdit",component:Va,meta:{requiresAuth:!0,withAccess:["admin"],permission:"saleEdit"},props:{viewMode:!1}},{path:"*",component:Ct}],Hn=new A["a"]({mode:"history",base:"/",routes:Vn});Hn.beforeEach((function(e,t,r){var n=a["default"].$cookies.get("token"),s=a["default"].$cookies.get("user_type"),i=a["default"].$cookies.get("role"),o=e.matched.some((function(e){return e.meta.requiresAuth})),c=e.meta.permission;if(!o||n&&s){var l=e.matched.map((function(e){return e.meta.withAccess||["admin","writer","reader"]})),u=l.some((function(e){return e.some((function(e){return e===s}))}));if(o&&!u||c&&!i[c])return R(),void r("Iniciar_Sesion");r()}else r("Iniciar_Sesion")}));var Yn=Hn,Kn=(r("bf40"),r("ce5b")),Zn=r.n(Kn);a["default"].use(Zn.a);var Jn={},Qn=new Zn.a(Jn),Xn=r("2b27"),es=r.n(Xn),ts=r("3003");a["default"].config.productionTip=!1,a["default"].use(es.a),a["default"].use(ts["a"]);var rs=new a["default"];d.a.defaults.headers.common={Authorization:"Bearer ".concat(a["default"].$cookies.get("token"))},d.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(rs.$emit("snackbar","No Autorizado."),R(),Yn.replace("/Iniciar_Sesion")),e})),a["default"].prototype.moment=W.a,new a["default"]({vuetify:Qn,router:Yn,render:function(e){return e(T)}}).$mount("#app")},"58fd":function(e,t,r){"use strict";var a=r("ed22"),n=r.n(a);n.a},"61fb":function(e,t,r){"use strict";var a=r("52a4"),n=r.n(a);n.a},"65a7":function(e,t,r){"use strict";var a=r("07e4"),n=r.n(a);n.a},"75b3":function(e,t,r){},"83be":function(e,t,r){},"85ec":function(e,t,r){},8758:function(e,t,r){},"8e22":function(e,t,r){},"9efd":function(e,t,r){"use strict";var a=r("1624"),n=r.n(a);n.a},a124:function(e,t,r){"use strict";var a=r("4c3d"),n=r.n(a);n.a},b498:function(e,t,r){"use strict";var a=r("3d51"),n=r.n(a);n.a},b4e5:function(e,t,r){"use strict";var a=r("03d5"),n=r.n(a);n.a},b560:function(e,t,r){"use strict";var a=r("050e"),n=r.n(a);n.a},bb74:function(e,t,r){"use strict";var a=r("f3c0"),n=r.n(a);n.a},be40:function(e,t,r){},c296:function(e,t,r){"use strict";var a=r("83be"),n=r.n(a);n.a},c3c1:function(e,t,r){},cea0:function(e,t,r){"use strict";var a=r("8e22"),n=r.n(a);n.a},d10b:function(e,t,r){"use strict";var a=r("75b3"),n=r.n(a);n.a},dad5:function(e,t,r){"use strict";var a=r("4607"),n=r.n(a);n.a},db9c:function(e,t,r){},dc88:function(e,t,r){"use strict";var a=r("8758"),n=r.n(a);n.a},def1:function(e,t,r){"use strict";var a=r("0970"),n=r.n(a);n.a},ec7d:function(e,t,r){},ed22:function(e,t,r){},f3c0:function(e,t,r){}});
//# sourceMappingURL=app.1b74ec71.js.map